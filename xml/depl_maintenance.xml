<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet
 href="urn:x-daps:xslt:profiling:novdoc-profile.xsl"
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "IGNORE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<chapter id="cha.depl.maintenance">
 <title>&cloud; Maintenance</title>
 <para>
  Keeping the nodes in &productname; up-to-date requires an appropriate
  setup of the update repositories (see
  <xref
  linkend="sec.depl.inst.admserv.post.local_repos.update"/> and the
  deployment of either the <guimenu>Updater</guimenu> &barcl; (see
  <xref
  linkend="sec.depl.inst.nodes.post.updater"/>) or the &susemgr;
  &barcl; (see <xref linkend="sec.depl.inst.nodes.post.manager"/>.
 </para>
 <para>
  If one of those &barcl; is deployed, patches are installed on the nodes.
  Installing patches that do not require a reboot of a node does not come
  with any service interruption. In case a patch (for example a kernel
  update) requires a reboot after the installation, services running on the
  machine that is rebooted, will not be available within &cloud;. Therefore
  it is strongly recommended, to install those patches during a maintenance
  window.
 </para>
 <note>
  <title>No Maintenance Mode</title>
  <para>
   As of &productname; &productnumber; it is not possible to put &cloud;
   into <quote>Maintenance Mode</quote>.
  </para>
 </note>
 <remark condition="clarity">
  2013-10-02 - fs: The following is mainly based on assumptions...
 </remark>
 <variablelist>
  <title>Consequences when Rebooting Nodes</title>
  <varlistentry>
   <term>&admserv;</term>
   <listitem>
    <para>
     While the &admserv; is offline, it is not possible to deploy new nodes.
     However, deploying rebooting the &admserv; has no effect on starting
     &vmguest;s or on &vmguest;s already running.
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>&contrnode;s</term>
   <listitem>
    <para>
     The consequences a reboot of a &contrnode; has, depends on the services
     running on that node:
    </para>
    <formalpara>
     <title>Database, &o_ident;, RabbitMQ, &o_img;, &o_comp;:</title>
     <para>
      No new &vmguest;s can be started.
     </para>
    </formalpara>
    <formalpara>
     <title>&o_objstore;:</title>
     <para>
      No object storage data is available. If &o_img; uses &o_objstore;, it
      will not be possible to start new &vmguest;s.
     </para>
    </formalpara>
    <formalpara>
     <title>&o_blockstore;, &ceph;:</title>
     <para>
      No block storage data is available.
     </para>
    </formalpara>
    <formalpara>
     <title>&o_netw;:</title>
     <para>
      No new &vmguest;s can be started. On running &vmguest;s the network
      will be unavailable.
     </para>
    </formalpara>
    <formalpara>
     <title>&o_dash;</title>
     <para>
      &o_dash; will be unavailable. Starting and managing &vmguest;s can be
      done with the command line tools.
     </para>
    </formalpara>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>&compnode;s</term>
   <listitem>
    <para>
     <remark condition="clarity">
      2013-10-02 - fs: How to ensure no new instances are started on a compute
      node while evacuating it? What about Windows compute nodes? What about
      VMware?
     </remark>
     Whenever a &compnode; is rebooted, all &vmguest;s running on that
     particular node will be shut down and must be manually restarted.
     Therefore it is recommended to <quote>evacuate</quote> the node by
     migrating &vmguest;s to another node, before rebooting it (see FIXME
     for details)
    </para>
   </listitem>
  </varlistentry>
 </variablelist>
</chapter>
