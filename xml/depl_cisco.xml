<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet
 href="urn:x-daps:xslt:profiling:novdoc-profile.xsl" 
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE appendix PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "IGNORE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<appendix id="app.deploy.cisco">
 <title>Using Cisco Nexus switches with &o_netw;</title>
 <para/>
 <sect1 id="app.deploy.cisco.requirements">
  <title>Requirements</title>
  <para>
   The following requirements must be met in order to use Cisco Nexus switches
   with &o_netw;:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     Cisco Nexus series 3000, 5000 or 7000
    </para>
   </listitem>
  </itemizedlist>
<!--

* The crowbar network needs to be setup in a way that the network
  communication between cloud instances happens on a separate interface. That
  means the "nova_fixed" network needs to be on its own NIC on the compute
  nodes and the controller. In the "dual" network mode you achieveÂ  this
  e.g. by mapping all networks apart from "nova_fixed" to the "intf0" conduit
  in the "networks" section (leaving "nova_fixed" on conduit "intf1").This is
  needed because the nexus plugin for quantum/neutron will reconfigure the
  VLAN trunk configuration on the switch ports which are used for the
  "nova_fixed" traffic.
* for the compute nodes write down which switch ports the nodes use for the
  "nova_fixed" network. This information is needed later on when deploying the
  quantum barclamp.
* The switch needs to have the XML management interface and ssh access to that
  interface enabled (see the Switch's documentation for details on how to
  achieve that)
* Delete any existing VLAN configuration for VLANs that you want to have
  managed via quantum (https://bugzilla.novell.com/show_bug.cgi?id=838398)
* Enable VLAN trunking for all VLANs that you want quantum to manage on the
  switch port that connects the controller node with the "nova_fixed" network.

-->
 </sect1>
<!--
Deploying Quantum:
Create a quantum proposal in the Crowbar Management interface.
Select "cisco" as the networking plugin and "vlan" for mode.
In the "Cisco Switch Credentials" table enter the IP address of the switch's management interface and the TCP port at which it is reachable via ssh. Enter the username and password that are required for accessing the switch. If you have mulitple switches add configuration for each switch that you want managed by quantum.
Apply the proposal
Now you need to continue the process of installing SUSE Cloud by the creating and applying proposal for the remaining barclamps (up to and including "nova")
After the configuration "nova" configuration was successfully applied go back to the quantum barclamp
You should now see an additional table in the proposal UI labeled "Assign Switch Ports" which lists all compute nodes in your cloud
Now, for all of those nodes select with switch to which it is connected (if you setup more than one switch) and enter the switch port to which it is connected in the same from as the switch uses in its management interface (usually this is something like "1/13" or "Eth1/20")
Reapply the quantum barclamp
If you add more compute nodes to nova lateron, remember to also always update the quantum proposal's configuration for those.

Verifying that it works:
Launch a VM instance using nova or the Openstack Dashboard
Find out which VLAN quantum assigned to the network that you assigned to the interface
e.g. by: quantum net-show fixed. it should return a "segementation_id" which matches the VLAN id of that network
SSH to your switch and display the VLAN configuration. You should see now that Port which connects the compute nodes on which the new instance is started is in trunk mode for the above VLAN.

Some more information on the Nexus support in Openstack is available here: https://wiki.openstack.org/wiki/Cisco-qo.com/wiki/OpenStack:Quantum)uantum
-->
</appendix>
