<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet
 href="urn:x-daps:xslt:profiling:novdoc-profile.xsl" 
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "IGNORE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>

<chapter id="cha.depl.trouble">
 <title>Help and Troubleshooting</title>
 <abstract>
  <para>
   <remark>taroth 2012-06-26: add abstract </remark>
  </para>
 </abstract>
 <sect1 id="sec.depl.trouble.log">
  <title>Log Files</title>
  <para>In case of any incidents or unexpected outcomes, log files are the
   first thing you should check. For a list of log files, sorted according to
   nodes and software components, refer to <xref linkend="cha.deploy.logs"/>.
  </para>
 </sect1>
 
   <!-- taroth 2012-08-30: the following is copied from 
    https://github.com/SUSE/cloud/wiki/SUSE-Cloud-Demo-Guide,
    section "Trouble-shooting"-->
    
   <!--  
    Crowbar
     **********
        No output is seen after running screen -L /opt/dell/bin/install-chef-suse.sh:
            You will need to check the log file due to bug 775422.
        A Crowbar node fails to PXE boot with Could not find kernel image: 
            ../suse-11.2/install/boot/x86_64/loader/linux
            /srv/tftpboot/suse-11.2/install on your admin node has not been set up 
            correctly to contain the SLES11 SP2 installation media. 
             Please review the installation instructions.
        A Crowbar node hangs at Unpacking initramfs during PXE boot:
            Your node probably does not have enough RAM. Try increasing to 2GB.
        A Crowbar node which is a libvirt VM shuts down during the discovery/allocation 
            phase and does not restart: Check the VM's &lt;on_reboot&gt; setting via 
            virsh dumpxml $domainname - it should be restart, not destroy.
            If necessary, edit the setting via virsh edit $domainname
        A Crowbar node VM hangs at Booting from Hard Disk... during initial deployment:
            If you have the boot menu enabled, you will have to select PXE boot manually 
            via the menu rather than letting it time out (bug 775676).
        A Crowbar node hangs at Executing AutoYast script: /var/adm/autoinstall/init.d/crowbar_join:
            Find the IP address via the Crowbar web UI
            ssh as root to that IP
            Check the /var/log/crowbar-join* log files for errors
        The Nova barclamp proposal fails to apply on a VM node:
            Make sure you are not trying to run KVM within KVM. In the proposal, 
            hypervisor should be set to qemu.
        Browsing to the Chef web UI gives a Tampered with cookie error:
            You probably have an old cookie in your browser from a previous Chef installation 
            on the same IP. Remove the cookie and try again.
        RabbitMQ server fails to start
            If /var/log/rabbitmq/startup_log contains node with name "rabbit"
            already running on "&lt;hostname&gt;" then you probably changed the machine's 
            hostname post-installation. You will have to change it back - even if RabbitMQ 
            was reconfigured to work with the new hostname, Crowbar and Chef will definitely not work.
            
    OpenStack
    ************
        Unable to connect to VM:
            Check security groups.
            Don't use YaST2 Firstboot or any EULA dialog.
            Ensure network is set to DHCP.
            Ensure suse-ami-tools is installed.
        Slow VM performance?
            Is your VM running on btrfs? This is not recommended, see 
            http://www.linux-kvm.org/page/Tuning_KVM for more details.-->
 
   <!-- taroth 2012-08-30: the following is copied from 
    https://github.com/SUSE/cloud/wiki/SUSE-Cloud-Demo-Guide,
    section "Known Issues"-->

  <!--
   
   You can check bugzilla for open issues with SUSE Cloud 1.0. In particular, check for open issues 
   in the Deployment component which could affect the installation process.

   Other known issues include the following:

    * No 32-bit support; currently x86_64 architecture is required everywhere.
    * Crowbar is not yet FHS-compliant.
    *  Cannot reuse existing HTTP install server.
    * Removal of barclamps from a node do not necessarily shut down associated services or 
       remove associated packages. This means that you may well run into problem if moving 
       barclamp roles from one node to another. Manual remediation may be required in these cases.
    * Crowbar is not yet always very good at reporting progress or explaining errors. 
      See the "Debugging" section below.
    * Sometimes Crowbar may report a node as Ready while it's actually rebooting. 
       Applying a proposal to a node in this state will fail. Once the node is up again, 
       click Apply on the failed proposal again to make it succeed.
    * kvm virtio drivers don't support mode 6 bonding, so in that case you will need to 
      use emulated NICs (e.g. e1000). See bug 771343 for more details.
   -->
 <sect1 id="sec.dep.trouble.inst">
  <title>Installation and Node Deployment</title>
  <para></para>
  <sect2>
   <title>&admserv;</title>
   <para></para>
  </sect2>
  <sect2>
   <title>&contrnode;</title>
   <para></para>
  </sect2>
  <sect2>
   <title>&compnode;s</title>
   <para></para>
  </sect2>
  <sect2>
   <title>&stornode;s</title>
   <para></para>
  </sect2>
 </sect1>
 
 <sect1 id="sec.depl.trouble.misc">
  <title>Miscellaneous</title>
  <variablelist>
   <varlistentry>
    <term>How can I get technical assistance?</term>
    <listitem>
     <para>
      <remark>taroth 2012-08-30: on which node and as which user do I need to
       execute supportconfig? </remark>&productname; provides a command line
      tool that collects log files <remark>taroth 2012-08-30: DEVs - of all
       nodes?</remark> and the key configuration files of your nodes. </para>
     <!--<orderedlist>
      <listitem>
       <para>Log in as &rootuser; to the &admserv;. </para>
      </listitem>
      <listitem>
       <para>Enter <command>supportconfig</command> and follow the instructions
        on the screen. </para>
      </listitem>
     </orderedlist>-->
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
 </chapter>
