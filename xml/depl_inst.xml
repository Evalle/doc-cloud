<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet
 href="urn:x-daps:xslt:profiling:novdoc-profile.xsl" 
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "IGNORE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<chapter id="cha.depl.inst">
 <title>Installing &cloud;</title>
 <abstract>
  <para>
   Deploying and installing &productname; is a multi-step process, starting by
   deploying a basic &sls; installation and the &productname; add-on product
   to the &admserv;. Now the product and update repositories need to be set up
   and the &cloud; network needs to be configured. Next the &admserv; setup
   will be finished. Once the &admserv; is ready, you can start deploying and
   configuring the &ostack; nodes. The complete node deployment is done
   automatically via &crow; and &chef; from the &admserv;. All you need
   to do is to PXE boot the nodes and to deploy the &ostack; services
   to them.
  </para>
 </abstract>  
 <sect1 id="sec.depl.inst.overview">
  <title>Installation Process Overview</title>
  <procedure>
   <title>High Level Overview of the &cloud; Installation</title>
   <!--taroth 2012-08-17: fs, if you have separate sections or procedures for
       the steps, use xrefs instead?-->
   <step>
    <para>
     Install &sls; 11 SP2 on the &admserv; with the Add-On products
     &smtool; (optional) and &cloud;.
    </para>
    <substeps>
     <step>
      <para>
       If &smt; has been installed on the &admserv;, mirror the &sls;
       repositories.
      </para>
     </step>
     <step>
      <para>
       Make sure all repositories needed for deploying and updating the
       nodes are locally available on the &admserv;.
      </para>
     </step>
     <step>
      <para>
       Run the &chef; installation script which will finalize the &cloud;
       installation on the &admserv;.
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     PXE boot all nodes onto which the &ostack; components should be
     deployed and allocate them in the &crow; Web interface to start the
     automatic &sls; installation.
    </para>
   </step>
   <step>
    <para>
     Configure and deploy the &ostack; services via the &crow; Web
     interface or command line tools.
    </para>
   </step>
   <step>
    <para>
     When all &ostack; services are up and running, &cloud; is ready. The
     cloud admin can now upload images to enable users to start deploying
     &vmguest;s.
    </para>
   </step>
  </procedure>
 </sect1>
 
 <sect1 id="sec.depl.inst.admserv">
  <title>Setting up the &admserv;</title>
  <para>
   In this section you will learn how to install and set up the &admserv; from
   bare metal. As a result, the &admserv; will be ready to deploy &ostack;
   nodes and services. It will run on &sls; 11 SP2 and will include the add-on
   products &productname; and &smt; (optional). Installing the &admserv;
   involves the following basic steps:
  </para>
  <orderedlist>
   <listitem>
    <para>
     <!-- Operating System Installation -->
     <xref linkend="sec.depl.inst.admserv.os" xrefstyle="select:title nopage"/>
    </para>
    <orderedlist>
     <listitem>
      <para>
       <!-- Add-On Products Selection -->
       <xref linkend="sec.depl.inst.admserv.os.add_on" xrefstyle="select:title nopage"/>
      </para>
     </listitem>
     <listitem>
      <para>
       <!-- Partitioning -->
       <xref linkend="sec.depl.inst.admserv.os.partition" xrefstyle="select:title nopage"/>
      </para>
     </listitem>
     <listitem>
      <para>
       <!-- Software Selection -->
       <xref linkend="sec.depl.inst.admserv.os.software" xrefstyle="select:title nopage"/>
      </para>
     </listitem>
     <listitem>
      <para>
       <!-- Product registration -->
       <xref linkend="sec.depl.inst.admserv.os.software" xrefstyle="select:title nopage"/>
      </para>
     </listitem>
     <listitem>
      <para>
       <!-- CA configuration -->
       <xref linkend="sec.depl.inst.admserv.os.ca" xrefstyle="select:title nopage"/>
      </para>
     </listitem>
     <listitem>
      <para>
       <!-- Basic network configuration -->
       <xref linkend="sec.depl.inst.admserv.os.network" xrefstyle="select:title nopage"/>
      </para>
     </listitem>
     <listitem>
      <para>
       <!-- SMT Configuration -->
       <xref linkend="sec.depl.inst.admserv.os.smt" xrefstyle="select:title nopage"/>
      </para>
     </listitem>
     <listitem>
      <para>
       <!-- Crowbar configuration -->
       <xref linkend="sec.depl.inst.admserv.os.crowbar" xrefstyle="select:title nopage"/>
      </para>
     </listitem>
    </orderedlist>
   </listitem>
   <listitem>
    <para>
     <!-- SMT repository setup -->
     <xref linkend="sec.depl.inst.admserv.smt_repos" xrefstyle="select:title nopage"/>
    </para>
   </listitem>
   <listitem>
    <para>
     <!-- Local repository setup -->
     <xref linkend="sec.depl.inst.admserv.local_repos" xrefstyle="select:title nopage"/>
    </para>
   </listitem>
   <listitem>
    <para>
     <!-- Run install-chef-suse.sh -->
     <xref linkend="sec.depl.inst.admserv.cloud_setup" xrefstyle="select:title nopage"/>
    </para>
   </listitem>
  </orderedlist>
  <sect2 id="sec.depl.inst.admserv.os">
   <title>Operating System Installation</title>
   <para>
    Start the installation by booting from the &sls; 11 SP2 installation
    medium.
   </para>
   <note>
    <title>Differences from the Default Installation Process</title>
    <para>
     For an overview of a default &sls; installation, refer to the &sls;
     &instquick;. Detailed installation instructions are available in the
     &sls; <citetitle>Deployment Guide</citetitle>. Both documents are
     available at <ulink url="http://www.suse.com/documentation/sles11/"/>.
    </para>
    <para>
     The following sections will only cover the differences from the default
     installation process.
    </para>
   </note>
   <sect3 id="sec.depl.inst.admserv.os.add_on">
    <title>Add-On Product Selection</title>
    <para>
     Installing the Add-On products &cloud; and &smt; (optional) during the
     &sls; installation is recommended. Make sure to be able to access the
     installation media (DVD or iso image). Alternatively, install the add-on
     products after the &sls; installation.
    </para>
    <para>
     If you have access to remote update repositories for &sls; and &cloud;
     from the cloud's admin network, you may want to skip the &smt; Add-On
     product installation. Please refer to <xref linkend="sec.depl.req.repos"/>
     for details.
    </para>
    <para>
     On the <guimenu>Installation Mode</guimenu> screen, click
     <guimenu>Include Add-On products from Separate Media</guimenu>. Proceed
     with <guimenu>Next</guimenu> to the Add-On product installation dialog.
     I you have direct access to the installation media (for example, via DVD
     or USB stick), skip the network installation dialog. Otherwise configure
     the network as described in <xref
     linkend="sec.depl.inst.admserv.os.network"/>.  Add &cloud; and
     &smt; (optional) as add-on products and proceed with the
     installation. Consult the &sls; <citetitle>Deployment Guide</citetitle>
     at <ulink
     url="http://www.suse.com/documentation/sles11/book_sle_deployment/data/sec_i_yast2_inst_mode.html"/>
     for detailed instructions.
    </para>
   </sect3>
   <sect3 id="sec.depl.inst.admserv.os.partition">
    <title>Partitioning</title>
    <para>
     Currently, &crow; requires <filename>/opt</filename> to be writable.
     Apart from that, &cloud; has no special requirements in regards of
     partitioning. However, it is recommended to create a separate partition
     or volume for <filename>/srv</filename>. /srv will host all update and
     product repositories for &sls; and &cloud;. A size of at least 25 GB is
     required. Help on using the partitioning tool is available at <ulink
     url="http://www.suse.com/documentation/sles11/book_sle_deployment/data/sec_yast2_i_y2_part_expert.html"/>.
    </para>
   </sect3>

   <sect3 id="sec.depl.inst.admserv.os.software">
    <title>Software selection</title>
    <para>
     Installing a minimal base system is sufficient to set up the
     &admserv;. The following patterns are the minimum requirement:
    </para>
    <itemizedlist>
     <listitem>
      <para>
       <guimenu>Base System</guimenu>
      </para>
     </listitem>
     <listitem>
      <para>
       <guimenu>Minimal System (Appliances)</guimenu>
      </para>
     </listitem>
     <listitem>
      <para>
       <guimenu>Subscription Management Tool</guimenu> (optional)
      </para>
     </listitem>
     <listitem>
      <para>
       <guimenu>SUSE Cloud Admin Node</guimenu>
      </para>
     </listitem>
     <listitem>
      <para>
       <guimenu>Web and LAMP Server</guimenu> (only needed when installing 
       &smt;)
      </para>
     </listitem>
    </itemizedlist>
   </sect3>
   <sect3 id="sec.depl.inst.admserv.os.registration">
    <title>Product Registration</title>
    <para>
     FIXME: test how to register SUSE Cloud in this step
     If you have installed the &smt; Add-On product, you must register your
     &sls; version at the &ncc; now, otherwise you will not be able to
     configure the &smt; server. You have received a &sls; registration key
     with the &cloud; &admserv; subscription. See <ulink
     url="http://www.suse.com/documentation/sles11/book_sle_deployment/data/sec_i_yast2_conf.html"/>
     for details on the &ncc; registration.
    </para>
   </sect3>

   <sect3 id="sec.depl.inst.admserv.os.ca">
    <title>CA Setup</title>
    <para>
     &ostack; needs access to a certification authority (CA) for project VPNs
     and encrypted images, &smt; needs it to validate server certificates. If
     you already have a CA certificate in your organization, import it. 
     Otherwise generate all certificates in the &admserv; itself by accepting
     the &yast; proposal. See <ulink url="http://www.suse.com/documentation/sles11/book_security/data/cha_security_yast_ca.html"/>
     for more information.
    </para>
   </sect3>

   <sect3 id="sec.depl.inst.admserv.os.network">
    <title>Basic Network Configuration</title>
    <para>
     Only the first interface (<systemitem class="resource">eth0</systemitem>)
     on the &admserv; needs to be configured during the installation. Other
     interfaces will be automatically configured by the cloud installation
     script.
    </para>
    <para>
     <systemitem class="resource">eth0</systemitem> needs to be given a fixed
     IP address from the admin network&mdash;when sticking with the default
     network addresses this would be <systemitem
     class="etheraddress">192.168.124.10</systemitem>. The address you need to
     enter for the <guimenu>Default Gateway</guimenu> depends on whether you
     have provided an external gateway for the admin network (use the address
     of that gateway) or not (use <replaceable>xxx.xxx.xxx</replaceable>.1,
     e.g <systemitem class="etheraddress">192.168.124.1</systemitem>). Using a
     custom IP address or more than one network interfaces requires to adjust
     the &crow; configuration in a later step as described in <xref
     linkend="sec.depl.inst.admserv.os.crowbar"/>.
    </para>
    <para>
     If you allow to access the admin network from another network (via
     gateway or bastion network), you can also add one or more nameservers. The
     &admserv;'s name server will automatically configured to forward requests
     for non-local records to those server(s).
    </para>
    <para>
     You also need to assign a hostname and a full qualified domain name
     (FQDN) such as <replaceable>admin.cloud.&exampledomain;</replaceable> to
     <systemitem class="resource">eth0</systemitem>.
    </para>
    <para>
     Last, the firewall need to be disabled for all interfaces.
    </para>
    <important>
     <title>&admserv; Domain Name and Hostname</title>
     <para>
      Setting up the &cloud; will also install a DNS server for all nodes in
      the cloud. The domainname you specify for the &admserv; will be used for
      the DNS zone. It is recommended to use a sub-domain such as
      <replaceable>cloud.&exampledomain;</replaceable>.
     </para>
     <para>
      The hostname and the FQDN need to be resolvable with <command>hostname
      <option>-f</option> </command>. Double-check whether
      <filename>/etc/hosts</filename> contains an appropriate entry for the
      &admserv;. It should look like the following:
     </para>
     <screen>191.168.124.10 admin.cloud.&exampledomain; admin</screen>
     <para>
      It is <emphasis>not</emphasis> possible to change the &admserv; hostname
      or the FQDN once the cloud installation script has been.
     </para>
    </important>
   </sect3>

   <sect3 id="sec.depl.inst.admserv.os.smt">
    <title>&smt; Configuration (optional)</title>
    <para>
     In case you have installed the &smt; add-on product, you will be asked to
     configure it. Configuring the &smt; server requires you to have your
     mirroring credentials and your registration e-mail address at hand. To
     access them, log in to the &ncc; at <ulink
     url="http://www.novell.com/center/"/>. Get the mirror credentials by
     selecting <menuchoice> <guimenu>My Products</guimenu> <guimenu>Mirror
     Credentials</guimenu> </menuchoice> in the left navigation. Obtain your
     registration e-mail address from <menuchoice> <guimenu>My
     Profile</guimenu> <guimenu>Login Profile</guimenu>
     </menuchoice>.
    </para>
    <para>
     Enter this data at the <guimenu>SMT Configuration Wizard Step
     1/2</guimenu> into the fields <guimenu>User</guimenu>,
     <guimenu>Password</guimenu>, and <guimenu>NCC E-mail Used for
     Registration</guimenu>. Accept the pre-filled defaults for the other
     input fields.  Make sure to <guimenu>Test</guimenu> the credentials.
    </para>
    <para>
     In step two of the &smt; configuration you need to enter a database
     passwords and specify an e-mail address for getting reports. Refer to
     <ulink url="http://www.suse.com/documentation/smt11/"/> for the complete
     <citetitle>SMT for SUSE Linux Enterprise 11 Guide</citetitle>.
    </para>
   </sect3>

   <sect3 id="sec.depl.inst.admserv.os.crowbar">
    <title>&crow; Setup</title>
    <para>
     This &yast; module allows you to basically configure all networks
     within the cloud and set the network mode for all networks. Furthermore
     you can also change the username and password for
     the &crow; Web interface with which you can manage the &ostack;
     nodes.
    </para>
    <para>
     Start &yast; and choose <menuchoice> <guimenu>Miscellaneous</guimenu>
     <guimenu>Crowbar</guimenu> </menuchoice> to start the &yast; &crow;
     module. The <guimenu>Administration Settings</guimenu> tab lets you
     change the username and password for the &crow; web interface. On the
     <guimenu>Network Mode</guimenu> tab you can choose between
     <guimenu>single</guimenu>, <guimenu>dual</guimenu> and
     <guimenu>team</guimenu> mode. When choosing <guimenu>team</guimenu>, you
     also need to set the <guimenu>Bonding Policy</guimenu>. See <xref
     linkend="sec.depl.req.network.modes"/> for details on &cloud; and network
     modes. In-depth information about the <guimenu>Bonding Policy</guimenu>
     (also known as bonding modes) is available at <ulink
     url="https://www.kernel.org/doc/Documentation/networking/bonding.txt"/>
     in section <citetitle>2. Bonding Driver Options</citetitle> under
     <citetitle>mode</citetitle>.
    </para>
    <para>
     If you do not want to use the default IP addresses and the default
     address allocation change these settings on the
     <guimenu>Networks</guimenu> tab. See <xref
     linkend="sec.depl.req.network"/> for details on the cloud network. You
     can also change the Bridge and VLAN allocation on the
     <guimenu>Networks</guimenu> tab. Only change them if you really know what
     you do, sticking with the defaults is recommended. 
    </para>
    <para>
     If you want to separate the admin and the BMC network, you must change
     the settings for the networks <guimenu>bmc</guimenu> and
     <guimenu>bmc_vlan</guimenu>. The <guimenu>bmc_vlan</guimenu> is used to
     used to generate a vlan tagged interface on the &admserv; that can access
     the <guimenu>bmc</guimenu> network. The <guimenu>bmc_vlan</guimenu> needs
     to be in the in the same ranges as <guimenu>bmc</guimenu> and
     <guimenu>bmc</guimenu> has to have have <guimenu>VLAN</guimenu> enabled. 
    </para>
    <example>
     <title>Separate BMC network</title>
     <screen>               bmc:                    bmc_vlan
------------------------------------------------------            
Subnet:    |             192.168.126.0
Netmask:   |             255.255.255.0
Router:    |             192.168.126.1
Broadcast: |             192.168.126.255
host range:| 192.168.126.10 -        192.168.126.101 -
           | 192.168.126.100         192.168.126.101
VLAN:      |                  yes
VALN ID:   |                  100
Bridge:    |                  no</screen>
    </example>    
    <important>
     <title>
      No Network Changes after Having Run the Cloud Installation Script
     </title>
     <para>
      As of &productname; &productnumber; it is not possible to change the
      network setup after having run the cloud installation script. Allowing
      such changes will be possible with the next release of &productname;. 
     </para>
    </important>
    
    <note>
     <title>Setting up a Bastion Network</title>
     <para>
      As of &productname; &productnumber; it is not possible to set up a
      bastion network with &yast; &crowbar;. It needs to be configured
      manually, see FIXME.
     </para>
    </note>

<!-- Bastion Network:
     also see https://bugzilla.novell.com/show_bug.cgi?id=771343
-->


   </sect3>
  </sect2>

  <sect2 id="sec.depl.inst.admserv.smt_repos">
   <title>Setting up the &smt; Repositories (optional)</title>
   <para>
    <remark condition="clarity">
     2012-08-02 - fs: What about mirroring Cloud and SMT update repositories?
    </remark>
    During the installation the &smt; server was set up to be able to
    communicate with the &ncc;. In this step we will add and mirror the update
    repositories for &sls; and for &productname;. They will serve as the update 
    source for the &ostack; nodes. Run the following commands as user &rootuser;: 
   </para>

   <screen><?dbsuse-fo font-size="0.63em"?>for REPO in SLES11-SP{2-Core,2-Updates,1-Updates,1-Pool} SUSE-Cloud-1.0-{Pool,Updates}; do
  smt repos $REPO sle-11-x86_64 -e
done
smt mirror -L /var/log/smt/smt-mirror.log</screen>

   <para>
    The <command>smt mirror</command> command will download approximately 
    14&nbsp;GB of patches. This process may last up to several hours. A log file 
    is written to <filename>/var/log/smt/smt-mirror.log</filename>.
   </para>
  </sect2>

  <sect2 id="sec.depl.inst.admserv.local_repos">
   <title>Setting Up Local Repositories</title>
   <para>

    <remark condition="clarity">
     2012-08-02 - fs: What about Cloud and SMT update repositories?
    </remark>
    
    In order to deploy the &ostack; nodes and to provide update repositories for
    them, repositories must be locally available at
    <filename>/srv/tftpboot</filename>. 
   </para>
   <procedure>
    <step>
     <para>
      Make the  contents of the &sls; installation medium available at
      <filename>/srv/tftpboot/suse-11.2/install/</filename>. Either mount the
      medium or copy its contents. Do not link it, as this may cause trouble
      when PXE-booting clients.<remark>aspiers 2012-08-17: 
      let's be clear about this one way or the other.  Why
      might it cause trouble?  Does the tftpd run chroot or something? 
      - taroth 2012-08-17: no idea, DEVs - any ideas from your side?</remark>
     </para>
     <para>
      If copying, it is recommended to use <command>rsync</command>. If the
      installation data is located on a removable device, make sure to mount
      it first (for example, after inserting the DVD in the &admserv; and waiting 
      for the device to become ready):
     </para>
     <screen>mount /dev/dvd /mnt
rsync -avP /mnt/ /srv/tftpboot/suse-11.2/install/
umount /mnt</screen>
     <note>
      <title>Mind the Trailing Slash</title>
      <para>
       The <command>rsync</command> command must be used with a trailing slash 
       in <filename>/mnt/</filename> as shown above. Otherwise rsync would only
       copy the <filename>/mnt</filename> directory itself, but not its contents.
      </para>
     </note>
     <para>
      If the installation data is provided by a remote machine, log in to that
      machine and push the data to the &admserv; (which has the IP address
      <systemitem class="etheraddress">192.168.124.10</systemitem> in the
      following example):
     </para>
     <screen>rsync -avPz <replaceable>/data/sles11sp2/</replaceable> <replaceable>192.168.124.10</replaceable>:/srv/tftpboot/suse-11.2/install/</screen>
    </step>
    <step>
     <para>
      Make the contents of the &cloud; installation medium available at
      <filename>/srv/tftpboot/repos/Cloud/</filename> using one of the
      techniques described in the previous step.
     </para>
    </step>
    <step>
     <para>
      It is recommended to use the two directories created in the previous
      steps as the installation source for &sls; and &cloud;. In order to do
      so, remove the existing two repositories and add them again with the new
      location (the local directories at <filename>/srv/tftpboot/</filename>).
     </para>
    </step>
    <step>
     <para>
      Link the &smt; update repositories (in this case links can be used,
      because these repositories are not used for PXE-booting). Since they are
      available locally there is no need to use remote repositories for
      updating &admserv; itself, therefore add these repositories to
      <systemitem class="library">libzypp</systemitem>, too:
     </para>
     <screen><?dbsuse-fo font-size="0.63em"?>for REPO in SLES11-SP{2-Core,2-Updates,1-Updates,1-Pool} SUSE-Cloud-1.0-{Pool,Updates}; do
  ln -s /srv/www/htdocs/repo/\$RCE/$REPO/sle-11-x86_64 /srv/tftpboot/repos/$REPO
  zypper ar /srv/www/htdocs/repo/\$RCE/$REPO/sle-11-x86_64 $REPO
done</screen>
    </step>
    <step>
     <para>

      <remark condition="clarity">
       2012-08-02 - fs: is it really wise to disable _all_ repos from
       nu_novell_com? There are repositories which have not been mirrored by
       smt...
      </remark>
      
      Now all repositories needed to update all nodes in the cloud (including
      the &admserv;) and to deploy the &ostack; nodes are available as
      local repositories. Therefore remote repositories from the &ncc; can be
      disabled by running the following command:
     </para>
     <screen>zypper ms -d -R nu_novell_com</screen>
     <para>
      Optionally you can also disable automatic refreshing for these repositories:
     </para>
     <screen>zypper mr -d -R `zypper lr -s | grep "nu_novell_com" | cut -c 1-3`</screen>
     <para>The local repository setup is completed. </para>
    </step>
    <step>
     <para>
      If you have skipped the online update during installation, you need to update
      the system now (before starting to set up the cloud):
     </para>
     <screen>zypper patch</screen>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.depl.inst.admserv.cloud_setup">
   <title>Setting up &cloud;</title>
   <para>
    Now everything is in place to finally configure the &admserv;. This is
    done by running the script
    <filename>/opt/dell/bin/install-chef-suse.sh</filename>. This command will 
    install and configure &chef;, and use it to complete the installation of 
    &crow; and all required &barcl;. It will take several minutes to complete.
   </para>

   <warning>
    <title>Double Check Your Hostname</title>
    <para>
     Make absolutely sure your host and domain name are set up correctly and
     are returned when running the command <command>hostname -f</command>. You
     will not be able to change the names after having run
     <filename>install-chef-suse.sh</filename> for the first time. See 
     <xref linkend="sec.depl.inst.admserv.os.network"/> for instructions.
    </para>
   </warning>
<!--
aspiers:
Unfortunately screenlog.0 is generated by the screen process, not by
the script itself, so the script cannot refer to it.  However I think
it's better if the script forks output to somewhere like:

  /var/log/chef/install.log

This is a more appropriate location and is independent of the use of
screen / tmux etc.  Here is the patch which I will try to get into RC1
if it's not too late ;-)

  http://pastebin.suse.de/4757
-->

  <important>
   <title>Losing the Network Connection</title>
   <para>
    Run the installation script <filename>install-chef-suse.sh</filename> 
    inside of a terminal multiplexer like GNU Screen 
    (provided by the <systemitem class="resource"></systemitem> package).
   </para>
   <para>
    During the run of this script the network will be reconfigured. This may 
    result in interrupting the script when being run from a network connection
    (like SSH). Using <command>screen</command> will continue running the script 
    in a session to which you can reconnect via <command>screen -r</command> 
    if you lose the connection.
   </para>
  </important> 
  <!--taroth 2012-08-20: tmux (as an alternative to screen) is not part of the 
  SLE media, therefore did not mention it here-->
 <screen>screen /opt/dell/bin/install-chef-suse.sh</screen>
  <para>
    Note that if you configure <filename>/etc/resolv.conf</filename> on the
    &admserv; to point to upstream DNS nameservers, then the bind DNS
    software which automatically gets set up during the installation process 
    will automatically be configured to forward requests for non-local records 
    to those servers.
   </para>
<!--
   <remark condition="clarity">
    2012-08-14 - fs:

    => if $bastion_network {
          crowbar network -U crowbar -P crowbar allocate_ip default &lt;crowbar.example.com> bastion admin
          chef-client
       }

    => adjust autoyast.xml.erb
    
   </remark>
-->
 </sect2>

</sect1>

</chapter>
