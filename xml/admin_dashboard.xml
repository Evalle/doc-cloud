<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet
 href="urn:x-daps:xslt:profiling:docbook45-profile.xsl" 
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "IGNORE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<chapter id="cha.adm.dash">
 <title>Using &cloud; &dash;</title>
 <abstract>
  <para>The &cloud; &dash; is a Web interface that allows cloud administrators
  to manage various &ostack; services, like managing and creating images, creating 
  keypairs, or attaching volumes to instances. It is based on &ostack; &dash;
  (also known as <literal>Horizon</literal>). 
   <remark>taroth 2012-07-04: not sure about the CLI - if it has the same scope,
   maybe a basic administration tasks chapter in front of this one migth be useful
   to explain the underlying logic - maybe something for next revision</remark>
  </para>
 </abstract>
 <sect1 id="sec.adm.dash.req">
  <title>Requirements</title>
  <para>
   <remark>taroth 2012-07-04: DEVs, any requirements for the browser from which
   to use &dash; (Firefox, Chrome, Opera)? or does it work with any browser that 
   supports HTML5 and JavaScript?</remark>
  </para>
  <para>The &cloud; &dash; back-end runs on the node that has the 
  <literal>nova-dashboard server</literal> role.<remark>taroth 2012-07-04: DEVs, 
   is there any Web service that must be started
  on the respective node? which protocol and port is used for communication?
  </remark>
   </para>
  </sect1>
  <sect1 id="sec.adm.dash.intro">
   <title>&cloud; &dash;&mdash;Overview</title>
   <para></para>
   <sect2 id="sec.adm.dash.intro.login">
    <title>Logging Into the &cloud; &dash; as Administrator</title>
    <para>To access the &cloud; dash; you need to know the 
    <remark>taroth 2012-07-04: DEVs - which IP address? the public one? (as 
    there may be several IP addresses per node...)</remark> IP address of the node 
    that has the <literal>nova-dashboard server</literal> role. Ask the 
    administrator of &cloud; &admserv; for the information, including
    the user name and password of the cloud administrator user with which you can 
    log in to &cloud; &dash;.</para>
    <procedure>
     <step>
      <para>
      On any machine, start a Web browser and make sure that JavaScript and
      cookies are enabled.<remark>taroth 2012-07-04: DEVs, does the machine running 
      the browser need to be in the same network than the node? or can it be
      accessed from anywhere?</remark>
      </para>
     </step>
     <step>
      <para>
      Point it at the IP address of the node running an instance of <literal>nova-dashboard
      server</literal>. <remark>taroth 2012-07-04: DEVs, no ":port" needed?</remark>
      </para>
      <screen>https://<replaceable>IPaddress</replaceable>/</screen>
      <para>
       <remark>taroth 2012-07-04: DEVs, may it happen that a certificate
      warning will appear at first login? </remark>
      </para>
      <!--<note>
       <title>Certificate Warning</title>
       <para>
       Depending on your browser and browser options, you may get a
       certificate warning when trying to access the URL for the first time.
       This is because &hawk; uses a self-signed certificate that is not
       considered trustworthy per default.
      </para>
       <para>
       To proceed anyway, you can add an exception in the browser to bypass
       the warning. To avoid the warning in the first place, the self-signed
       certificate can also be replaced with a certificate signed by an
       official Certificate Authority. For information on how to do so,
       refer to <xref linkend="vle.ha.hawk.certificate"/>.
      </para>
      </note>-->
     </step>
     <step>
      <para>
      On the &cloud; &dash; login screen, enter the <guimenu>User Name</guimenu>
      and <guimenu>Password</guimenu> and click <guimenu>Sign In</guimenu>.
     </para>
      <para>
      The &dash; screen appears, showing a <guimenu>Project</guimenu> and an 
      <guimenu>Admin</guimenu> tab.
     </para>
     </step>
    </procedure>
   </sect2>
  </sect1>
 <!--
 <sect1 id="sec.ha.config.hawk.intro">
  <title>&hawk;&mdash;Overview</title>

  <para>
   Learn how to start &hawk;, how to log in to the cluster and get to know
   the &hawk; basics.
  </para>

  <sect2 id="sec.ha.config.hawk.intro.connect">
   <title>Starting &hawk; and Logging In</title>
   <procedure id="pro.ha.hawkstart">
    <title>Starting &hawk;</title>
    <para>
     To use &hawk;, the respective Web service must be started on the node
     that you want to connect to via the Web interface. For communication,
     the standard HTTPS protocol and port <literal>7630</literal> is used.
    </para>
    <step>
     <para>
      On the node you want to connect to, open a shell and log in as
      &rootuser;.
     </para>
    </step>
    <step>
     <para>
      Check the status of the service by entering
     </para>
     <screen>rchawk status</screen>
    </step>
    <step>
     <para>
      If the service is not running, start it with
     </para>
     <screen>rchawk start</screen>
     <para>
      If you want &hawk; to start automatically at boot time, execute the
      following command:
     </para>
     <screen>chkconfig hawk on</screen>
    </step>
   </procedure>
   <procedure id="pro.ha.hawk.login">
<!-\- <remark>taroth 2010-03-03: tserong, do we have any restrictions regarding
    the browsers we support (or that have been tested with hawk)? tserong: any
    modern graphical web browser with JavaScript and cookies enabled - if we
    need an explicit supported browser statement, then I'd say: Firefox 3.0+,
    IE 7.0+</remark>-\->
    
  </sect2>

  <sect2 id="sec.ha.configuration.hawk.intro.main">
   <title>Main Screen: Cluster Status</title>
   <para>
    After logging in, &hawk; displays the <guimenu>Cluster Status</guimenu>
    screen. It shows a summary with the most important global cluster
    parameters and the status of your cluster nodes and resources. The
    following color code is used for status display of nodes and resources:
   </para>
   <itemizedlist id="il.ha.config.hawk.colors">
    <title>&hawk; Color Code</title>
    <listitem>
     <para>
      Green: OK. For example, the resource is running or the node is online.
     </para>
    </listitem>
    <listitem>
     <para>
      Red: Bad, unclean. For example, the resource has failed or the node
      was not shut down cleanly.
     </para>
    </listitem>
    <listitem>
     <para>
      Yellow: In transition. For example, the node is currently being shut
      down.
     </para>
    </listitem>
    <listitem>
     <para>
      Gray: Not running, but the cluster expects it to be running. For
      example, nodes that the administrator has stopped or put into
      <literal>standby</literal> mode. Also nodes that are offline are
      displayed in gray (if they have been shut down cleanly).
     </para>
    </listitem>
   </itemizedlist>
   <para>
    If a resource has failed, a failure message with the details is shown in
    red at the top of the screen.
   </para>
   <figure pgwide="0">
    <title>&hawk;&mdash;Cluster Status (Summary View)</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="hawk-cluster-status-main.png" width="90%" format="PNG" />
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="hawk-cluster-status-main.png" width="80%" format="PNG" />
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    The <guimenu>Cluster Status</guimenu> screen refreshes itself in near
    real-time. Choose between the following views:
   </para>
<!-\-fate#309100-\->
   <variablelist>
    <varlistentry>
     <term>Summary View</term>
     <listitem>
      <para> Shows the most important global cluster parameters and the status
       of your cluster nodes and resources at the same time. If your setup
       includes <xref linkend="sec.ha.config.hawk.geo" xrefstyle="select:title" />, the summary view also shows tickets. To view details about all
       elements belonging to a certain category (tickets, nodes, or resources),
       click the category title, which is marked as link. Otherwise click the
       individual elements for details.</para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Tree View</term>
     <listitem>
      <para>
       Presents an expandable view of the most important global cluster
       parameters and the status of your cluster nodes and resources. Click
       the arrows to expand or collapse the elements belonging to the
       respective category. In contrast to the <guimenu>Summary
       View</guimenu> this view not only shows the IDs and status of
       resources but also the type (for example, primitive, clone, or
       group).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Table View</term>
     <listitem>
      <para>
       This view is especially useful for larger clusters, because it shows
       in a concise way which resources are currently running on which node.
       Inactive nodes or resources are also displayed.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    To perform basic operator tasks on nodes and resources (like starting or
    stopping resources, bringing nodes online, or viewing details), click
    the wrench icon next to the respective node or resource to access a
    context menu.
   </para>
   <para>
    For more complex tasks like configuring resources, constraints, or
    global cluster options, use the navigation bar at the left hand side.
    From there, you can also generate a cluster report
    (<literal>hb_report</literal>), view the cluster history, or explore
    potential failure scenarios with the simulator.
   </para>
   <note>
    <title>Available Functions in &hawk;</title>
    <para>
     By default, users logged in as &rootuser; or
     <systemitem class="username">hacluster</systemitem> have full
     read-write access to all cluster configuration tasks. However,
     <xref linkend="cha.ha.acl" xrefstyle="select:title"/> can be used to
     define fine-grained access permissions.
    </para>
    <para>
     If ACLs are enabled in the CRM, the available functions in &hawk;
     depend on the user role and access permissions assigned to you. In
     addition, the following functions in &hawk; can only be executed by the
     user <systemitem class="username">hacluster</systemitem>:
    </para>
    <itemizedlist>
     <listitem>
      <para>
       Generating a <literal>hb_report</literal>.
      </para>
     </listitem>
     <listitem>
      <para>
       Using the history explorer.
      </para>
     </listitem>
     <listitem>
      <para>
       Viewing recent events for nodes or resources.
      </para>
     </listitem>
    </itemizedlist>
   </note>
  </sect2>
 </sect1>-->
  <sect1>
   <title>Adding Projects and Users</title>

   <para>
    <remark>taroth 2012-06-26: FIXME</remark>
   </para>
  </sect1>
  <sect1>
   <title>Adding Images</title>

   <para>
    <remark>taroth 2012-06-26: FIXME</remark>
   </para>
  </sect1>
  <sect1>
   <title>Adding Flavors</title>

   <para>
    <remark>taroth 2012-06-26: FIXME</remark>
   </para>
  </sect1>
  <sect1>
   <title>Setting Quotas</title>

   <para>
    <remark>taroth 2012-06-26: FIXME</remark>
   </para>
  </sect1>
 </chapter>
