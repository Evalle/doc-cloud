<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet
 href="urn:x-daps:xslt:profiling:novdoc-profile.xsl" 
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "IGNORE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<chapter id="cha.user.dash">
 <title>Using &cloud; &dash;</title>
 <abstract>
  <para>
   &dash-descr-short;
  </para>

  <para>
   After a short introduction to the &dash;, learn how to execute key tasks
   such as creating images, launching and managing instances, and how to use
   volumes for persistent storage.
  </para>
 </abstract>
 <sect1 id="sec.user.dash.req">
  <title>Requirements</title>
 &dash-req;
</sect1>
 <sect1 id="sec.user.dash.intro">
  <title>&cloud; &dash;&mdash;Overview</title>

  <para>
   Learn how to log in to &cloud; &dash; and get a short overview of its Web
   interface.
  </para>

  <sect2 id="sec.adm.user.intro.login">
   <title>Logging in to the &cloud; &dash;</title>
   &dash-login;
   <figure>
    <title>&cloud; &dash;&mdash;Login Screen</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="cloud_dash_login_user.png" width="60%;" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cloud_dash_login_user.png" width="50%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    After logging in, the &dash;&apos;s
    <xref linkend="sec.user.dash.intro.main" xrefstyle="select:title nopage"/>
    appears.
   </para>
  </sect2>

  <sect2 id="sec.user.dash.intro.main">
   <title>Main Screen (User's View)</title>
 &dash-main-screen;
  <para>
    If you are logged in as a user, the main screen only shows the
    <guimenu>Project</guimenu> tab. This shows details for the projects (or
    <literal>tenants</literal>) that you are a member of.
   </para>
   &dash-project-tab;
   </sect2>
 </sect1>
 <sect1 id="sec.user.dash.img">
  <title>Managing Images</title>

<!--taroth 2012-08-27: on behalf of cthiel, filed bnc#777504 (images can be
   managed by users/admins)-->
   &img-manage;
   </sect1>
 <sect1 id="sec.user.dash.inst.launch">
  <title>Launching Instances</title>
  &instances;
  
  <sect2 id="sec.user.dash.inst.launch.params">
   <title>Key Parameters</title>
   <para>
    When starting an instance, you need to specify the following key
    parameters:
   </para>
   <variablelist>
    <varlistentry>
     <term>Flavor</term>
     <listitem> &flavors; <para>
       For more details and a list of default flavors available, refer to
       <xref linkend="sec.adm.dash.flavors"/>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Keypair</term>
     <listitem>&keypairs; <para>
       For details, refer to
       <xref
        linkend="sec.user.dash.inst.access.keys"/>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Security Group</term>
     <listitem>&security; <para>
       For details, refer to
       <xref
        linkend="sec.user.dash.inst.access.security"/>.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    If needed, you can assign a floating (public) IP address to a running
    instance and attach a block storage device (<literal>volume</literal>)
    for persistent storage. For details, refer to
    <xref linkend="sec.user.dash.inst.access.ips"/> and
    <xref linkend="sec.user.dash.volumes"
    />.
   </para>
  </sect2>

  <sect2 id="sec.user.dash.inst.launch.from.vol.">
   <title>Booting From Volumes</title>
   <para>
    You can start an instance directly from one of the images available in
    Glance or from an image that you have copied to a persistent volume
    before. For the preparation of the volume, refer to
    <xref linkend="pro.user.instances.launch.prep.vol" xrefstyle="select:label"/>.
    When booting an image from a volume, the procedure is basically the same
    as when launching an instance from an image in &img;, except for some
    additional steps.
   </para>
   <procedure id="pro.user.instances.launch.prep.vol">
    <title>Creating and Preparing the Volume</title>
    <para>
     To be able to boot an instance from a volume, create the volume and
     copy an image to it:
    </para>
    <step id="step.user.dash.vol.create">
     <para>
      Create a volume as described in
      <xref linkend="pro.user.dash.vol.create"/>. Its size must be big
      enough to store an unzipped image.
     </para>
    </step>
    <step>
     <para>
      Create an image with &susestudio; or &suseonsite;. For details, refer
      to <xref
      linkend="sec.adm.cli.img.build"/>.
     </para>
    </step>
    <step>
     <para>
      Launch an instance as described in
      <xref linkend="pro.user.instances.launch"/>.
     </para>
    </step>
    <step>
     <para>
      Attach the volume to the instance as described in
      <xref
        linkend="pro.user.dash.vol.attach"/>.
     </para>
    </step>
    <step>
     <para>
      Assuming that the attached volume is mounted as
      <filename>/dev/vdb</filename>, use one of the following commands to
      copy the image to the attached volume:
     </para>
     <itemizedlist>
      <listitem>
       <para>
        For a raw image:
       </para>
<screen>cat&nbsp;<replaceable>IMAGE</replaceable>&nbsp;&gt;/dev/null</screen>
       <para>
        (alternatively, use <command>dd</command>)
       </para>
      </listitem>
      <listitem>
       <para>
        For a non-raw image:
       </para>
<screen>qemu-img convert -O raw&nbsp;<replaceable>IMAGE</replaceable>&nbsp;/dev/vdb</screen>
      </listitem>
      <listitem>
       <para>
        For a <filename>*.tar.bz2</filename> image:
       </para>
<screen>tar xfjO&nbsp;<replaceable>IMAGE</replaceable>&nbsp;&gt;/dev/null </screen>
      </listitem>
     </itemizedlist>
    </step>
    <step>
     <para>
      As only <emphasis>detached</emphasis> volumes are available for
      booting, detach the volume. For details on how to do so, refer to
      <xref linkend="pro.user.dash.vol.attach"/>,
      <xref linkend="step.user.dash.vol.detach" xrefstyle="select:label nopage"/>.
     </para>
    </step>
    <step>
     <para>
      For booting an instance from the volume, continue with
      <xref
    linkend="pro.user.instances.launch"/>.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.user.dash.instances.launch">
   <title>Launching an Instance</title>
   <para>
    You can start an instance directly from one of the images available in
    &img;. In that case, &productname; will create a local copy of the
    image on the respective &compnode; where the instance will be started.
   </para>
   <note id="note.launch.inst.from.vol">
    <title>Launching Instances from a Volume</title>
    <para>
     Alternatively, you can start an instance from an image that has been
     copied to a persistent volume. In that case, the instance will be
     booted from the volume (provided by nova-volume) via iSCSI.
    </para>
    <para>
     For preparation details, refer to
     <xref linkend="pro.user.instances.launch.prep.vol"/>.
    </para>
    <para>
     To boot an instance from the volume, follow
     <xref linkend="pro.user.instances.launch"/>. Especially note the
     following steps:
    </para>
    <itemizedlist>
     <listitem>
      <para>
       <xref linkend="step.user.dash.inst.vol.1" xrefstyle="select:label  nopage"/>:
       To be able to select from which volume to boot, launch an instance
       from an arbitrary image. The image you select there will
       <emphasis>not</emphasis> be booted. It will be replaced by the image
       on the volume that you choose during the next steps.
      </para>
      <para>
       In case you want to boot a <emphasis>&xen;</emphasis> image from a
       volume, note the following requirement: The image you launch in
       <xref linkend="step.user.dash.inst.vol.1"
        xrefstyle="select:label nopage"/>
       needs to be of the same type (<literal>fully virtualized</literal> or
       <literal>paravirtualized</literal>) as the one on the volume.
      </para>
     </listitem>
     <listitem>
      <para>
       <xref linkend="step.user.dash.inst.vol.2" xrefstyle="select:label nopage"/>:
       Select the <guimenu>Volume or Volume Snapshot</guimenu> to boot from.
       Enter a <guimenu>Device Name</guimenu> (<literal>vda</literal> for
       &kvm; images, <literal>xvda</literal> for &xen; images).
      </para>
     </listitem>
    </itemizedlist>
   </note>
   <procedure id="pro.user.instances.launch">
    <title>Launching an Instance</title>
    <step>
     <para>
      Log in to &cloud; &dash;.
     </para>
    </step>
    <step>
     <para>
      If you are a member of multiple projects, select a
      <guimenu>Project</guimenu> from the drop-down list at the top of the
      tab.
     </para>
    </step>
    <step>
     <para>
      Click the <guimenu>Images &amp; Snapshot</guimenu> category. The
      &dash; shows the <guimenu>Images</guimenu> that have been uploaded to
      &img; and are available for this project.
     </para>
    </step>
    <step id="step.user.dash.inst.vol.1">
     <para>
      Select an image and click <guimenu>Launch</guimenu>.
     </para>
    </step>
    <step>
     <para>
      In the window that opens, specify the following:
     </para>
     <substeps>
      <step>
       <para>
        Enter a <guimenu>Server Name</guimenu> that will be assigned to the
        virtual machine.
       </para>
      </step>
      <step>
       <para>
        From the <guimenu>Flavor</guimenu> drop-down list, select the
        <quote>size</quote> of the virtual machine to launch.
       </para>
      </step>
      <step>
       <para>
        Select a <guimenu>Keypair</guimenu>. For details, refer to
        <xref
         linkend="sec.user.dash.inst.access.keys"/>. In case
        an image uses a static &rootuser; password or a static key set
        (neither is recommended), you do not need to provide a keypair on
        starting the instance.
       </para>
      </step>
      <step>
       <para>
        In <guimenu>Instance Count</guimenu>, enter the number of virtual
        machines to launch from this image.
       </para>
      </step>
      <step>
       <para>
        Activate the <guimenu>Security Groups</guimenu> that you want to
        assign to the instance. Security groups are a kind of cloud firewall
        that define which incoming network traffic should be forwarded to
        instances. For details, refer to
        <xref
         linkend="sec.user.dash.inst.access.security"/>. If
        you have not created any specific security groups, you can only
        assign the instance to the default security group.
       </para>
       <informalfigure>
        <mediaobject>
         <imageobject role="fo">
          <imagedata fileref="cloud_dash_launch_instance.png" width="70%" format="PNG"/>
         </imageobject>
         <imageobject role="html">
          <imagedata fileref="cloud_dash_launch_instance.png" width="70%" format="PNG"/>
         </imageobject>
        </mediaobject>
       </informalfigure>
      </step>
      <step id="step.user.dash.inst.vol.2">
       <para>
        If you want to <guimenu>Boot From Volume</guimenu>, click the
        respective entry to expand its options. Set the options as described
        in <xref linkend="note.launch.inst.from.vol"/>.
       </para>
      </step>
      <step>
       <para>
        Click <guimenu>Launch Instance</guimenu>. The instance will be
        started on any of the &compnode;s in the cloud.
       </para>
      </step>
     </substeps>
    </step>
   </procedure>
   <para>
    After you have launched an instance, switch to the <guimenu>Instances
    &amp; Volumes</guimenu> category to view the <guimenu>Instance
    Name</guimenu>, its (private or public) <guimenu>IP address</guimenu>,
    its <guimenu>Size</guimenu>, its <guimenu>Status</guimenu>,
    <guimenu>Task</guimenu>, and <guimenu>Power State</guimenu>.
   </para>
   <figure>
    <title>&cloud; &dash;&mdash;List of Launched Instances</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="cloud_dash_instances_volumes.png" width="100%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cloud_dash_instances_volumes.png" width="80%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    If you did not provide a keypair on starting and have not touched
    security groups or rules so far, by default the instance can only be
    accessed from inside the cloud via VNC at this point. Even pinging the
    instance is not possible. To change this, proceed with
    <xref
     linkend="sec.user.dash.inst.access"/>.
   </para>
  </sect2>
 </sect1>
 <sect1 id="sec.user.dash.inst.access">
  <title>Configuring Access to the Instances</title>
  &inst-access-params;
  
   <sect2 id="sec.user.dash.inst.access.keys">
   <title>Creating or Importing Keys</title>
   &keypairs;
   <procedure>
    <step>
     <para>
      Log in to &cloud; &dash;.
     </para>
    </step>
    <step>
     <para>
      If you are a member of multiple projects, select a
      <guimenu>Project</guimenu> from the drop-down list at the top of the
      tab.
     </para>
    </step>
    <step>
     <para>
      Click the <guimenu>Access &amp; Security</guimenu> category. The
      &dash; shows <guimenu>Floating IPs</guimenu>, <guimenu>Security
      Groups</guimenu>, and <guimenu>Keypairs</guimenu> for the selected
      project.
     </para>
    </step>
    <step>
     <para>
      To import a keypair that you have generated with an external tool:
     </para>
     <substeps>
      <step>
       <para>
        Click <guimenu>Import Keypair</guimenu>.
       </para>
      </step>
      <step>
       <para>
        In the window that opens, enter a name for the keypair and copy the
        public key into the respective input field.
       </para>
      </step>
      <step>
       <para>
        Confirm your choice.
       </para>
      </step>
     </substeps>
    </step>
    <step>
     <para>
      To create a new keypair:
     </para>
     <substeps>
      <step>
       <para>
        Click <guimenu>Create Keypair</guimenu>.
       </para>
      </step>
      <step>
       <para>
        In the window that opens, enter a name for the keypair and confirm
        your choice.
       </para>
       <para>
        &ostack; generates a keypair and provides the private key for
        download as a <filename>*.pem</filename> file.
       </para>
      </step>
      <step>
       <para>
        Save the <filename>*.pem</filename> file locally and change its
        permissions so that only you can read and write to the file:
       </para>
<screen>chmod 600 <replaceable>MY_PRIV_KEY</replaceable>.pem</screen>
      </step>
     </substeps>
    </step>
   </procedure>
   <para>
    The public key of the keypair is registered at the &comp; database. The
    &dash; lists the keypair in the <guimenu>Access &amp; Security</guimenu>
    category as shown in <xref linkend="fig.cloud.dash.keylist"/>.
   </para>
   <figure id="fig.cloud.dash.keylist">
    <title>&cloud; &dash;&mdash;Keypairs</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="cloud_dash_access_security.png" width="100%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cloud_dash_access_security.png" width="80%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 id="sec.user.dash.inst.access.security">
   <title>Configuring Security Groups and Rules</title>
   &security;
   <sect3 id="sec.user.dash.inst.access.security.groups">
    <title>Security Groups</title>
    &sec-groups;
   
    <procedure id="pro.cloud.dash.security.groups">
     <title>Creating or Deleting Security Groups</title>
     <step>
      <para>
       Log in to &cloud; &dash;.
      </para>
     </step>
     <step>
      <para>
       If you are a member of multiple projects, select a
       <guimenu>Project</guimenu> from the drop-down list at the top of the
       tab.
      </para>
     </step>
     <step>
      <para>
       Click the <guimenu>Access &amp; Security</guimenu> category. The
       &dash; shows <guimenu>Floating IPs</guimenu>, <guimenu>Security
       Groups</guimenu>, and <guimenu>Keypairs</guimenu> for the selected
       project.
      </para>
     </step>
     <step>
      <para>
       To create a new security group:
      </para>
      <substeps>
       <step>
        <para>
         Click <guimenu>Create Security Group</guimenu>.
        </para>
       </step>
       <step>
        <para>
         In the window that opens, enter a <guimenu>Name</guimenu> and
         <guimenu>Description</guimenu> for the group and confirm your
         changes.
        </para>
       </step>
      </substeps>
     </step>
     <step>
      <para>
       To delete one or multiple security groups:
      </para>
      <substeps>
       <step>
        <para>
         Activate the check boxes in front of the groups that you want to
         delete.
        </para>
       </step>
       <step>
        <para>
         Click <guimenu>Delete Security Groups</guimenu> and confirm your
         choice in the pop-up that appears.
        </para>
        <para>
         A message on the Web page shows if the action has been successful.
        </para>
       &note-groups-delete;
       <!--bmwiedemann 2012-08-26: terminating an instance to be able to delete a
        security goup (that does not require much bytes) sounds risky - 
        taroth 2012-08-27: bernhard is right, commenting-->
<!--To change that:
        <orderedlist>
         <listitem>
          <para>Switch to the <guimenu>Instances &amp; Volumes</guimenu> category 
           to view instances that have been launched.
          </para>
         </listitem>
         <listitem>
          <para>Click the instances' name links to view details such as the
           security group that is assigned to the respective instance.
          </para>
         </listitem>
         <listitem>
          <para>Terminate the instance belonging to the security group that you 
          want to delete. Relaunch the instance and assign it to another security 
          group.</para>
         </listitem>
        </orderedlist>-->
       </step>
      </substeps>
     </step>
    </procedure>
   </sect3>
   <sect3 id="sec.user.dash.inst.access.security.rules">
    <title>Security Group Rules</title>
    &sec-rules;
    
    &sec-rules-params;
    
    &security-default;
   
    <!--taroth 2012-08-27: IIRC, I read this in upstream docs, but according to
     bmwiedemann's tests, he could not access arbitrary ports of VMs in the same
     security group, therefore commenting-->
<!--Unless you change the rules for the default group, this means that
     those instances are only accessible from IP addresses belonging to other members 
     of this group.-->
    <procedure id="pro.cloud.dash.security.rules">
     <title>Configuring Security Group Rules</title>
     <step>
      <para>
       Log in to &cloud; &dash;.
      </para>
     </step>
     <step>
      <para>
       If you are a member of multiple projects, select a
       <guimenu>Project</guimenu> from the drop-down list at the top of the
       tab.
      </para>
     </step>
     <step>
      <para>
       Click the <guimenu>Access &amp; Security</guimenu> category. The
       &dash; shows <guimenu>Floating IPs</guimenu>, <guimenu>Security
       Groups</guimenu>, and <guimenu>Keypairs</guimenu> for the selected
       project.
      </para>
     </step>
     <step>
      <para>
       Select the security group to modify, then click <guimenu>Edit
       Rules</guimenu>. The window that appears shows which rules have
       already been configured.
      </para>
     </step>
     <step>
      <para>
       To allow SSH access to the instances:
      </para>
      <substeps>
       <step>
        <para>
         Set <guimenu>IP Protocol</guimenu> to <literal>TCP</literal>.
        </para>
       </step>
       <step>
        <para>
         Enter the value <literal>22</literal> in both <guimenu>From
         Port</guimenu> and <guimenu>To Port</guimenu>.
        </para>
       </step>
       <step>
        <para>
         To allow access from <emphasis>all</emphasis> IP addresses
         (specified as IP subnet in CIDR notation as
         <literal>0.0.0.0/0</literal>), leave the other fields unchanged.
        </para>
        <para>
         Alternatively, allow only IP addresses from other security groups
         to access the specified port. In that case, select the desired
         security group from the <guimenu>Source Group</guimenu> drop-down
         list.
        </para>
       </step>
       <step>
        <para>
         Confirm your changes to add the rule.
        </para>
       </step>
      </substeps>
     </step>
     <step>
      <para>
       To allow pinging the instances:
      </para>
      <substeps>
       <step>
        <para>
         Set <guimenu>IP Protocol</guimenu> to <literal>ICMP</literal>.
        </para>
       </step>
       <step>
        <para>
         Enter the value <literal>-1</literal> in both <guimenu>From
         Port</guimenu> and <guimenu>To Port</guimenu>. This allows access
         to all codes and all types of ICMP traffic, respectively.
        </para>
       </step>
       <step>
        <para>
         To allow access from <emphasis>all</emphasis> IP addresses
         (<literal>0.0.0.0/0</literal>), leave the other fields unchanged.
        </para>
        <para>
         Alternatively, allow only members of other security groups to ping
         instances. In that case, select the desired security group from the
         <guimenu>Source Group</guimenu> drop-down list.
        </para>
       </step>
       <step>
        <para>
         Confirm your changes to add the rule.
        </para>
       </step>
      </substeps>
     </step>
     <step>
      <para>
       To allow access via UDP port (for example, for a DNS server running
       on a VM):
      </para>
      <substeps>
       <step>
        <para>
         Set <guimenu>IP Protocol</guimenu> to <literal>UDP</literal>.
        </para>
       </step>
       <step>
        <para>
         Enter the value <literal>53</literal> in both <guimenu>From
         Port</guimenu> and <guimenu>To Port</guimenu>.
        </para>
       </step>
       <step>
        <para>
         To allow access from <emphasis>all</emphasis> IP addresses
         (<literal>0.0.0.0/0</literal>), leave the other fields unchanged.
        </para>
        <para>
         Alternatively, allow only IP addresses from other security groups
         to access the specified port. In that case, select the desired
         security group from the <guimenu>Source Group</guimenu> drop-down
         list.
        </para>
       </step>
       <step>
        <para>
         Confirm your changes to add the rule.
        </para>
       </step>
      </substeps>
     </step>
     <step>
      <para>
       To delete one or multiple security group rules:
      </para>
      <substeps>
       <step>
        <para>
         Select the security group to modify, then click <guimenu>Edit
         Rules</guimenu>. The window that appears shows which rules have
         already been configured.
        </para>
       </step>
       <step>
        <para>
         Select the rule or rules to remove.
        </para>
       </step>
       <step>
        <para>
         Click <guimenu>Delete Rules</guimenu> and confirm your choice.
        </para>
       </step>
      </substeps>
     </step>
    </procedure>
    <figure>
     <title>&cloud; &dash;&mdash;Adding Security Group Rules</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="cloud_dash_sec_groups_add_rule.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="cloud_dash_sec_groups_add_rule.png" width="60%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
<!--taroth 2012-08-15: mention when non-default sec groups are useful (info
    by mvidner, for CLI chapter mention how to change security groups for running 
    instances, info by cthiel: 
    sure, this is possible, but AFAIK only through the command-line:
    
    usage: nova add-secgroup <server> <secgroup>
    Add a Security Group to a server.
    
    Positional arguments:
    <server>    Name or ID of server.
    <secgroup>  Name of Security Group.
    
    
    usage: nova remove-secgroup <server> <secgroup>
    
    Remove a Security Group from a server.
    
    Positional arguments:
    <server>    Name or ID of server.
    <secgroup>  Name of Security Group.
   -->
   </sect3>
  </sect2>

  <sect2 id="sec.user.dash.inst.access.ips">
   <title>Managing IP Addresses</title>
   &ip-addr;
   <procedure>
    <title>Allocating Floating (Public) IPs to a Project</title>
    &ip-allocate;
    <step>
     <para>
      Log in to &cloud; &dash;.
     </para>
    </step>
    <step>
     <para>
      If you are a member of multiple projects, select a
      <guimenu>Project</guimenu> from the drop-down list at the top of the
      tab.
     </para>
    </step>
    <step>
     <para>
      Click the <guimenu>Access &amp; Security</guimenu> category. The
      &dash; shows a list of <guimenu>Floating IPs</guimenu>,
      <guimenu>Security Groups</guimenu>, and <guimenu>Keypairs</guimenu>
      for the current project.
     </para>
    </step>
    <step>
     <para>
      To allocate a floating IP address to the current project:
     </para>
     <substeps>
      <step>
       <para>
        Click <guimenu>Allocate IP to Project</guimenu>.
       </para>
      </step>
      <step>
       <para>
        In the window that opens, select a <guimenu>Pool</guimenu> out of
        which to take the IP address.
       </para>
      </step>
      <step>
       <para>
        Click <guimenu>Allocate IP</guimenu>.
       </para>
       <para>
        The &dash; shows the allocated IP addresses in the <guimenu>Access
        &amp; Security</guimenu> category. The first IP shown for an
        instance is the private IP address; the second one is the floating
        IP address.
       </para>
      </step>
     </substeps>
    </step>
    <step>
     <para>
      To release one or multiple floating IP addresses from a project:
     </para>
     <substeps>
      <step>
       <para>
        Activate the check boxes in front of the IP addresses that you want
        to release.
       </para>
      </step>
      <step>
       <para>
        Click <guimenu>Release Floating IPs</guimenu>. The IP addresses are
        put back into the pool of IP addresses that are available for all
        projects. If an IP address is currently assigned to a running
        instance, it will automatically be disassociated from the instance.
       </para>
      </step>
     </substeps>
    </step>
   </procedure>
   <procedure>
    <title>Assigning Floating (Public) IP Addresses to Instances</title>
    &ip-assign;
    <step>
     <para>
      Log in to &cloud; &dash;.
     </para>
    </step>
    <step>
     <para>
      If you are a member of multiple projects, select a
      <guimenu>Project</guimenu> from the drop-down list at the top of the
      tab.
     </para>
    </step>
    <step>
     <para>
      Click the <guimenu>Access &amp; Security</guimenu> category. The
      &dash; shows a list of <guimenu>Floating IPs</guimenu>,
      <guimenu>Security Groups</guimenu>, and <guimenu>Keypairs</guimenu>
      for the current project.
     </para>
    </step>
    <step>
     <para>
      To assign an IP to an instance:
     </para>
     <substeps>
      <step>
       <para>
        Select an IP address and click <guimenu>Associate IP</guimenu>.
       </para>
      </step>
      <step>
       <para>
        In the window that opens, select the <guimenu>Instance</guimenu> to
        associate the IP with and confirm your choice.
       </para>
       <para>
        In the <guimenu>Access &amp; Security</guimenu> category, the list
        of <guimenu>Floating IPs</guimenu> shows the ID of the instance with
        which the IP has been associated. The instance is now publicly
        available under the respective floating IPs address (provided you
        have also configured the security group rules for the instance
        accordingly). For details, refer to
        <xref linkend="sec.user.dash.inst.access.security"/>.
       </para>
      </step>
     </substeps>
    </step>
    <step>
     <para>
      To remove a floating IP address from an instance:
     </para>
     <substeps>
      <step>
       <para>
        Click the <guimenu>Access &amp; Security</guimenu> category.
       </para>
      </step>
      <step>
       <para>
        Select the IP address to remove.
       </para>
      </step>
      <step>
       <para>
        Click <guimenu>Disassociate IP</guimenu> and confirm your change.
       </para>
      </step>
     </substeps>
    </step>
   </procedure>
   <figure>
    <title>&cloud; &dash;&mdash;Instance IPs</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="cloud_dash_instances_volumes_ips.png" width="100%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cloud_dash_instances_volumes_ips.png" width="80%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>
 </sect1>
 <sect1 id="sec.user.dash.inst.manage">
  <title>Managing Instances</title>

  <para>
   The following are typical tasks for managing instances:
  </para>

  <itemizedlist>
   <listitem>
    <para>
     Accessing instances from remote
    </para>
   </listitem>
   <listitem>
    <para>
     Viewing logs
    </para>
   </listitem>
   <listitem>
    <para>
     Creating instance snapshots to preserve a certain disk state of an
     instance
    </para>
   </listitem>
   <listitem>
    <para>
     Using instance snapshots as base for new images
    </para>
   </listitem>
   <listitem>
    <para>
     Rebooting or terminating instances
    </para>
   </listitem>
   <listitem>
    <para>
     Pausing or suspending instances
    </para>
   </listitem>
   <listitem>
    <para>
     Tracking instance usage
    </para>
   </listitem>
  </itemizedlist>

  <sect2 id="sec.user.dash.inst.manage.logs">
   <title>Viewing Instance Logs</title>
   <procedure>
    <step>
     <para>
      Log in to &cloud; &dash;.
     </para>
    </step>
    <step>
     <para>
      If you are a member of multiple projects, select a
      <guimenu>Project</guimenu> from the drop-down list at the top of the
      tab.
     </para>
    </step>
    <step>
     <para>
      Click the <guimenu>Instances &amp; Volumes</guimenu> category.
     </para>
    </step>
    <step>
     <para>
      Select the instance and from the <guimenu>Actions</guimenu> drop-down
      list, select <guimenu>View Log</guimenu>.
     </para>
     <para>
      Alternatively, click the instance's name and switch to the
      <guimenu>Log</guimenu> tab that opens.
     </para>
     <para>
      The &dash; shows the output of the instance's serial console. To make
      use of this feature, the respective image must have set the serial
      console correctly in &grub;.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.user.dash.inst.manage.remote">
   <title>Accessing Instances from Remote</title>
   <para>
    The &dash;'s built-in VNC client allows you to access instances at any
    time.
   </para>
   <procedure>
    <title>Accessing an Instance via VNC</title>
    <step>
     <para>
      Log in to &cloud; &dash;.
     </para>
    </step>
    <step>
     <para>
      If you are a member of multiple projects, select a
      <guimenu>Project</guimenu> from the drop-down list at the top of the
      tab.
     </para>
    </step>
    <step>
     <para>
      Click the <guimenu>Instances &amp; Volumes</guimenu> category.
     </para>
    </step>
    <step>
     <para>
      Select the instance to access and from the <guimenu>Actions</guimenu>
      drop-down list, select <guimenu>VNC Console</guimenu>.
     </para>
     <para>
      Alternatively, click the instance's name and switch to the
      <guimenu>VNC</guimenu> tab that opens.
     </para>
    </step>
    <step>
     <para>
      When establishing the first connection, you might be prompted by your
      browser to trust a certificate before you can see the VNC screen.
     </para>
    </step>
    <step>
     <para>
      To display a larger VNC screen, use the link <guimenu>Click here to
      show only VNC</guimenu>.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="cloud_dash_vnc.png" width="70%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="cloud_dash_vnc.png" width="60%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      To leave the large VNC screen, use the back button of the browser.
     </para>
    </step>
   </procedure>

    &ssh-req;
   <!--For details, refer to <xref linkend="sec.user.dash.inst.access.security"/>.-->
<!--For details, refer to <xref linkend="sec.user.dash.inst.access.ips"/>.-->
  </sect2>

  <sect2 id="sec.user.dash.inst.manage.snapshots">
   <title>Using Instance Snapshots</title>
   &inst-snap;
   <procedure>
    <title>Creating Instance Snapshots</title>
    <step>
     <para>
      Log in to &cloud; &dash;.
     </para>
    </step>
    <step>
     <para>
      If you are a member of multiple projects, select a
      <guimenu>Project</guimenu> from the drop-down list at the top of the
      tab.
     </para>
    </step>
    <step>
     <para>
      Click the <guimenu>Instances &amp; Volumes</guimenu> category.
     </para>
    </step>
    <step>
     <para>
      Select the instance of which to create a snapshot. From the
      <guimenu>Actions</guimenu> drop-down list, select
      <guimenu>Snapshot</guimenu>.
     </para>
    </step>
    <step>
     <para>
      In the window that opens, enter a name for the snapshot and confirm
      your changes. The &dash; shows the new <guimenu>Instance
      Snapshot</guimenu> in the <guimenu>Images &amp; Snapshot</guimenu>
      category.
     </para>
    </step>
    <step>
     <para>
      To launch a new instance from the snapshot, select the snapshot and
      click <guimenu>Launch</guimenu>. Proceed with launching an instance as
      described in <xref linkend="pro.user.instances.launch"/>.
     </para>
    </step>
   </procedure>
   <procedure>
    <title>Basing an Image on a Snapshot</title>
    <step>
     <para>
      Log in to &cloud; &dash;.
     </para>
    </step>
    <step>
     <para>
      If you are a member of multiple projects, select a
      <guimenu>Project</guimenu> from the drop-down list at the top of the
      tab.
     </para>
    </step>
    <step>
     <para>
      Click the <guimenu>Images &amp; Snapshots</guimenu> category.
     </para>
    </step>
    <step>
     <para>
      Select the snapshot and from the <guimenu>Actions</guimenu> drop-down
      list, select <guimenu>Edit</guimenu>.
     </para>
    </step>
    <step>
     <para>
      In the window that opens, enter the image properties. For more
      information, refer to <xref linkend="sec.adm.dash.img"/>.
     </para>
    </step>
    <step>
     <para>
      Click <guimenu>Update Image</guimenu>.
     </para>
     <para>
      &dash; shows the newly created image in the list of images in the
      <guimenu>Images &amp; Snapshots</guimenu> category. If you delete the
      snapshot, upon which the image is based, the image will be deleted as
      well. If you delete the image, the snapshot upon which it is based,
      will be deleted as well.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.user.dash.inst.manage.terminate">
   <title>Pausing, Suspending, Rebooting, or Terminating Instances</title>
   &inst-terminate;
   
   &inst-terminate-warn;
  
   <procedure>
    <step>
     <para>
      Log in to &cloud; &dash;.
     </para>
    </step>
    <step>
     <para>
      If you are a member of multiple projects, select a
      <guimenu>Project</guimenu> from the drop-down list at the top of the
      tab.
     </para>
    </step>
    <step>
     <para>
      Click the <guimenu>Instances &amp; Volumes</guimenu> category.
     </para>
    </step>
    <step>
     <para>
      Select the instance that you want to put out of the running state.
      From the <guimenu>Actions</guimenu> drop-down list, select the
      respective action.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.user.dash.inst.manage.usage">
   <title>Tracking Usage</title>
   <para>
    Use the &dash;'s <guimenu>Overview</guimenu> category to track usage of
    instances per project. This allows you to track costs per month by
    showing metrics like number of VCPUs, disks, RAM, and uptime of all your
    instances.
   </para>
   <para>
    If you are a member of multiple projects, select a
    <guimenu>Project</guimenu> from the drop-down list at the top of the
    tab. Select a month and click <guimenu>Submit</guimenu> to query the
    instance usage for that month. The &dash; also allows to download a CVS
    summary.
   </para>
   <figure>
    <title>&cloud; &dash;&mdash;Usage Overview</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="cloud_dash_overview_usage.png" width="100%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cloud_dash_overview_usage.png" width="80%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>
 </sect1>
 <sect1 id="sec.user.dash.volumes">
  <title>Managing Volumes</title>
  &volumes;

  <procedure id="pro.user.dash.vol.create">
   <title>Creating or Deleting Volumes</title>
   <step>
    <para>
     Log in to &cloud; &dash;.
    </para>
   </step>
   <step>
    <para>
     If you are a member of multiple projects, select a
     <guimenu>Project</guimenu> from the drop-down list at the top of the
     tab.
    </para>
   </step>
   <step>
    <para>
     Click the <guimenu>Instances &amp; Volumes</guimenu> category.
    </para>
   </step>
   <step>
    <para>
     To create a volume:
    </para>
    <substeps>
     <step>
      <para>
       Click <guimenu>Create Volume</guimenu>.
      </para>
     </step>
     <step>
      <para>
       In the window that opens, enter a name to assign to a volume, a
       description (optional), and define the size in GB.
      </para>
     </step>
     <step>
      <para>
       Confirm your changes.
      </para>
      <para>
       The &dash; shows the volume in the <guimenu>Instances &amp;
       Volumes</guimenu> category.
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     To delete one or multiple volumes:
    </para>
    <substeps>
     <step>
      <para>
       Activate the check boxes in front of the volumes that you want to
       delete.
      </para>
     </step>
     <step>
      <para>
       Click <guimenu>Delete Volumes</guimenu> and confirm your choice in
       the pop-up that appears.
<!--taroth 2012-08-23: check what happens if
       the volume is attached to an instance! taroth 2012-08-27: according to
       bmwiedemann/cthiel, deleting attached volumes is refused-->
      </para>
      <para>
       A message on the Web page shows if the action has been successful.
      </para>
     </step>
    </substeps>
   </step>
  </procedure>

  <para>
   &vol-attach; View the <guimenu>Status</guimenu> of a volume in the
   <guimenu>Instances &amp; Volumes</guimenu> category of the &dash;: the
   volume is either <literal>available</literal> or already
   <literal>In-Use</literal>.
  </para>

  <procedure id="pro.user.dash.vol.attach">
   <title>Attaching Volumes to Instances</title>
   <step>
    <para>
     Log in to &cloud; &dash;.
    </para>
   </step>
   <step>
    <para>
     If you are a member of multiple projects, select a
     <guimenu>Project</guimenu> from the drop-down list at the top of the
     tab.
    </para>
   </step>
   <step>
    <para>
     Click the <guimenu>Instances &amp; Volumes</guimenu> category.
    </para>
   </step>
   <step>
    <para>
     Select the volume to add to an instance and click <guimenu>Edit
     Attachments</guimenu>.
    </para>
   </step>
   <step>
    <para>
     In the window that opens, select an instance to attach the volume to.
    </para>
   </step>
   <step>
    <para>
     Enter a <guimenu>Device Name</guimenu> under which the volume should be
     accessible on the virtual machine.
    </para>
   </step>
   <step>
    <para>
     Confirm your changes. The &dash; shows the instance to which the volume
     has been attached and the volume's device name.
    </para>
   </step>
   <step>
    <para>
     Now you can log in to the instance, mount the disk, format it, and use
     it.
    </para>
    <para>
     If the instance is running the latest &sls; SP2 Kernel, it is not
     necessary to reboot the virtual machine to make the device appear.
     Otherwise load the <literal>acpiphp</literal> module manually:
    </para>
<screen>modprobe acpiphp</screen>
   </step>
   <step id="step.user.dash.vol.detach">
    <para>
     To detach a volume from an instance:
    </para>
    <substeps>
     <step>
      <para>
       Select the volume and click <guimenu>Edit Attachments</guimenu>.
      </para>
     </step>
     <step>
      <para>
       In the window that opens, click <guimenu>Detach Volume</guimenu> and
       confirm your changes.
      </para>
      <para>
       A message on the Web page shows if the action has been successful.
      </para>
     </step>
    </substeps>
   </step>
  </procedure>

  <procedure>
   <title>Creating Volume Snapshots</title>
<!--taroth 2012-08-24: todo - add what volume snapshots are good for
    and how to delete them-->
   <step>
    <para>
     Log in to &cloud; &dash;.
    </para>
   </step>
   <step>
    <para>
     If you are a member of multiple projects, select a
     <guimenu>Project</guimenu> from the drop-down list at the top of the
     tab.
    </para>
   </step>
   <step>
    <para>
     Click the <guimenu>Instances &amp; Volumes</guimenu> category.
    </para>
   </step>
   <step>
    <para>
     Select the volume of which to create a snapshot.
    </para>
   </step>
   <step>
    <para>
     From the <guimenu>Actions</guimenu> drop-down list, select
     <guimenu>Create Snapshot</guimenu>.
    </para>
   </step>
   <step>
    <para>
     In the window that opens, enter a <guimenu>Snapshot Name</guimenu> and
     a <guimenu>Description</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Confirm your changes. The &dash; shows the new <guimenu>Volume
     Snapshot</guimenu> in the <guimenu>Images &amp; Snapshots</guimenu>
     category.
    </para>
   </step>
  </procedure>
 </sect1>
</chapter>
