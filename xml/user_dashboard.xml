<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet
 href="urn:x-daps:xslt:profiling:novdoc-profile.xsl" 
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "IGNORE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<chapter id="cha.user.dash">
 <title>Using &cloud; &dash;</title>
 <abstract>
  <para>
   &dash-descr-short;
  </para>

  <para>
   After a short introduction to the &dash;, learn how to execute key tasks
   such as creating images, managing networks, launching and managing
   instances, and how to use volumes for persistent storage.
  </para>
 </abstract>
 <sect1 id="sec.user.dash.req">
  <title>Requirements</title>
 &dash-req;
</sect1>
 <sect1 id="sec.user.dash.intro">
  <title>&cloud; &dash;&mdash;Overview</title>

  <para>
   Learn how to log in to &cloud; &dash; and get a short overview of its Web
   interface.
  </para>

  <sect2 id="sec.adm.user.intro.login">
   <title>Logging in to the &cloud; &dash;</title>
   &dash-login;
    <figure>
    <title>&cloud; &dash;&mdash;Login Screen</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="cloud_dash_login_user.png" width="60%;" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cloud_dash_login_user.png" width="50%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    After logging in, the &dash;&apos;s
    <xref linkend="sec.user.dash.intro.main" xrefstyle="select:title nopage"/>
    appears.
   </para>
  </sect2>

  <sect2 id="sec.user.dash.intro.main">
   <title>Main Screen (User's View)</title>
 &dash-main-screen;
  <para>
    If you are logged in as a user, the main screen only shows the
    <guimenu>Project</guimenu> tab on the left navigation bar. This shows
    details for the projects that you are a member of.
   </para>
   &dash-project-tab;
   </sect2>
 </sect1>
 <sect1 id="sec.user.dash.img">
  <title>Managing Images</title>

<!--taroth 2012-08-27: on behalf of cthiel, filed bnc#777504 (images can be
 managed by users/admins) - taroth 2013-06-18:  info by vuntz: 
 In Grizzly, it's possible for non-admin users to edit/delete images. Of course,
 they can only do that for images that are in the project they're in (and not
 for public images)-->
   &images;
   
   &img-manage;
   
   &img-props;
   
  <!--taroth 2013-07-22: CAVE - the following text (with slight variations due to different UI
  elements) can be found in xml/admin_dashboard, section "sec.adm.dash.img"-->

  <procedure id="pro.user.dash.img.create">
   <title>Adding Images</title>
   <para>
    As a user, you can only upload or modify images for the projects that
    you are a member of. Public images can only be uploaded or modified by
    cloud administrators.
   </para>
   <para>
    Since the &ostack; Grizzly release, it is possible to upload images also
    via the &dash;. Images can either be uploaded from external URLs or from
    a local file system. Upload of compressed image binaries
    (<literal>.zip</literal> and <literal>.tar.gz</literal>) is supported.
   </para>
   <note>
    <title>Limitations for Image Upload via &dash;</title>
    <itemizedlist>
     <listitem>
      <para>
       For upload from an external URL, the image must be available via a
       valid HTTP URL that leads directly to the image binary. URLs that
       redirect or serve error pages will result in unusable images.
      </para>
     </listitem>
     <listitem>
      <para>
       Avoid upload of large images via &dash;. For image sizes of several
       GB, it is strongly recommended to use the command-line tools. For
       details, refer to <xref
        linkend="sec.adm.cli.img.upload"/>.
       <remark>taroth 2013-07-22: ToDo - point to ID in UG instead (as soon as the CLI chapter
        contains this contents)</remark>
      </para>
     </listitem>
     <listitem>
      <para>
       Only a limited set of image properties are accessible from the
       &dash;. It is therefore recommended to set and modify image
       properties from the command line. For details, refer to
       <xref linkend="sec.adm.cli.img.props"/>.
       <remark>taroth 2013-07-22: ToDo - point to ID in UG instead (as soon as the CLI chapter
        contains this contents)</remark>
      </para>
     </listitem>
    </itemizedlist>
   </note>
   <step>
    <para>
     Log in to &cloud; &dash;.
    </para>
   </step>
   <step>
    <para>
     If you are a member of multiple projects, select a <guimenu>Current
     Project</guimenu> at the top of the left navigation bar.
    </para>
   </step>
   <step>
    <para>
     On the <guimenu>Project</guimenu> tab, select the <guimenu>Images &amp;
     Snapshots</guimenu> category.
    </para>
   </step>
   <step>
    <para>
     Click <guimenu>Create Image</guimenu>.
    </para>
   </step>
   <step>
    <para>
     In the window that opens, enter a <guimenu>Name</guimenu> for the
     image.
    </para>
   </step>
   <step>
    <para>
     If you have an external URL to upload the image from, enter the URL
     into <guimenu>Image Location</guimenu>. For a local image to upload,
     enter the path into <guimenu>Image File</guimenu> or click
     <guimenu>Browse</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Select the image <guimenu>Format</guimenu>.
    </para>
   </step>
   <step>
    <para>
     If you want to specify a minimum disk size or minimum RAM size that is
     required to boot the image, enter the values into the respective input
     fields. Otherwise the minimums are set to <literal>0</literal>.
    </para>
   </step>
   <step>
    <para>
     Confirm your changes.
    </para>
    <para>
     The image is uploaded to the &ostack; &img; service.
    </para>
   </step>
  </procedure>

  <para>
   After images have been added, they appear in the &cloud; &dash; on the
   <guimenu>Project</guimenu> tab. View them in the <guimenu>Images &amp;
   Snapshots</guimenu> category.
  </para>

  <figure>
   <title>&cloud; &dash;&mdash;List of Images (User's View)</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="cloud_dash_img_list_user.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cloud_dash_img_list_user.png" width="80%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   From there, you can also edit some image properties by selecting
   <menuchoice> <guimenu>More</guimenu> <guimenu>Edit</guimenu>
   </menuchoice>. As only a limited set of image properties are accessible
   from the &dash;, it is preferable to set and modify image properties from
   the command line. For example, to make sure that an image is only
   launched on appropriate hypervisors, you can specify image properties
   referring o a certain architecture, hypervisor type or application binary
   interface (ABI) that the image requires. For more details, refer to
   <xref linkend="sec.adm.cli.img.upload"/>.
   <remark>taroth 2013-08-05: ToDo - replace with link to CLI chapter in user guide as soon as
    section is covered there, too</remark>
  </para>

  <para>
   If you need to delete an image, proceed as follows.
  </para>

  <procedure id="pro.user.dash.img.delete">
   <title>Deleting Images</title>
   <step>
    <para>
     Log in to &cloud; &dash;.
    </para>
   </step>
   <step>
    <para>
     If you are a member of multiple projects, select a <guimenu>Current
     Project</guimenu> at the top of the left navigation bar.
    </para>
   </step>
   <step>
    <para>
     On the <guimenu>Project</guimenu> tab, select the <guimenu>Images &amp;
     Snapshots</guimenu> category.
    </para>
   </step>
   <step>
    <para>
     To delete one or multiple images, activate the check boxes in front of
     the images that you want to delete.
    </para>
   </step>
   <step>
    <para>
     Click <guimenu>Delete Images</guimenu> and confirm your choice in the
     pop-up that appears.
    </para>
    <para>
     A message on the Web page shows if the action has been successful.
    </para>
   </step>
  </procedure>
 </sect1>

 <sect1 id="sec.user.dash.networks">
  <title>Managing Networks</title>

  <para>Use the categories in the <guimenu>Manage Network</guimenu> group 
   to configure virtual networks. 
   &network-role-dependency;
   
  </para>

  
  <!--taroth 2013-09-12: CAVE - the following text (with slight variations due to different UI
   elements) can be found in xml/admin_dashboard, procedure "pro.adm.dash.netw.create"-->

  <procedure id="pro.user.dash.netw.create">
   <title>Creating, Modifying or Deleting Networks</title>

   &network-def;
   
   <para>As a user, you can only create or modify networks that are not-shared and not external 
   and that are part of the project that you belong to. For any other network-related tasks, contact
   your cloud administrator.</para>
   <step>
    <para>
     Log in to &cloud; &dash;.
    </para>
   </step>
   <step>
    <para>
     If you are a member of multiple projects, select a <guimenu>Current
     Project</guimenu> at the top of the left navigation bar.
    </para>
   </step>
   <step>
    <para>
     Click the <guimenu>Networks</guimenu> category.
    </para>
   </step>
   <step>
    <para>
     To create a new network or modify an existing one:
    </para>
    <substeps>
     <step>
      <para>
       Click <guimenu>Create Network</guimenu> or select a network and click <guimenu>Edit
       Network</guimenu>.
      </para>
     </step>
     <step>
      <para>
       In the window that opens, enter a name for your network or change the existing name.
      </para>
     </step>
     <step>
      <para>Leave the <guimenu>Admin State</guimenu> checkbox activated&mdash;unless you want the
       network to be marked as <literal>down</literal> and to not forward any packets.</para>
     </step>
     <step>
      <para>
       To additionally create a subnet to be associated with the new
       network, refer to
       <xref
        linkend="pro.user.dash.subnet.create"/>.
      </para>
     </step>
     <step>
      <para>
       Confirm your changes to create the new network.
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para><!--taroth 2013-09-11: only admins can delete shared and external networks-->
     To delete an existing network: 
    </para>
    <substeps>
     <step>
      <para>
       Activate the check boxes in front of the networks that you want to
       delete.
      </para>
     </step>
     <step>
      <para>
       Click <guimenu>Delete Network</guimenu> and confirm your choice in
       the pop-up that appears.
      </para>
      <para>
       A message on the Web page shows if the action has been successful.
      </para>
      &note-network-delete; 
     </step>
    </substeps>
   </step>
  </procedure>

  <figure>
   <title>&cloud; &dash;&mdash;List of Networks (User's View)</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="cloud_dash_netw_list_users.png" width="100%" format="PNG" />
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cloud_dash_netw_list_users.png" width="80%" format="PNG" />
    </imageobject>
   </mediaobject>
  </figure>
  
  <procedure id="pro.user.dash.subnet.create">
   <title>Creating or Modifying Subnets</title>
 &subnet-intro;
   <step>
    <para>
     If you are a member of multiple projects, select a <guimenu>Current
     Project</guimenu> at the top of the left navigation bar.
    </para>
   </step>
   <step>
    <para>
     Click the <guimenu>Networks</guimenu> category.
    </para>
   </step>
   <step>
    <para>
     Select a network and click its <guimenu>Network Name</guimenu> to view
     the details for the network.
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="cloud_dash_netw_details_users.png" width="100%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="cloud_dash_netw_details_users.png" width="80%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </informalfigure>
   </step>
   <step>
    <para>
     Click <guimenu>Create Subnet</guimenu> or select a subnet and click
     <guimenu>Edit Subnet</guimenu>.
    </para>
   </step>
   <step>
    <para>
     In the window that opens, enter a name for the subnet or change the
     existing name.
    </para>
   </step>
   <step>
    <para>
     Enter or change the <guimenu>Network Address</guimenu>. It must be
     specified in CIDR format, for example:
    </para>
<screen>192.168.0.0/24</screen>
   </step>
   <step>
    <para>
     Choose the <guimenu>IP Version</guimenu> to use
     (<literal>IPv4</literal> or <literal>IPv6</literal>).
    </para>
   </step>
   <step>
    <para>
     If you want to use another <guimenu>Gateway IP</guimenu> like the
     default one, enter a <guimenu>Gateway IP</guimenu>. Otherwise, leave
     the input field blank.
    </para>
   </step>
   <step>
    <para>
     If you do not want to use a gateway, activate <guimenu>Disable
     Gateway</guimenu>.
    </para>
   </step>
   <step>
    <para>
     To specify additional attributes for the subnet, click the
     <guimenu>Subnet Detail</guimenu> tab and proceed as follows:
    </para>
    <substeps>
     <step>
      <para>
       Specify if to <guimenu>Enable DHCP</guimenu>.
      </para>
     </step>
     <step>
      <para>
       To define multiple <guimenu>Allocation Pools</guimenu>, enter the
       start and the end IP address for each pool separated by a comma and
       in one entry per line for each pool. For example:
      </para>
<screen>192.168.1.100,192.168.1.120
192.158.1.100,192.158.1.120</screen>
     </step>
     <step>
      <para>
       To specify <guimenu>DNS Name Servers</guimenu>, enter an IP address
       list of servers for the current subnet (one entry per line).
      </para>
     </step>
     <step>
      <para>
       For additional routes announced to the hosts, enter them into the
       <guimenu>Host Routes</guimenu> field as follows: One entry per line,
       each specifying:
      </para>
<screen><replaceable>DESTINATION_CIDR</replaceable>,<replaceable>NEXTHOP</replaceable></screen>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     Confirm your changes to close the dialog.
    </para>
   </step>
  </procedure>

  <procedure id="pro.user.dash.port.edit">
   <title>Modifying Ports</title>
   &port-dash-automatics;
   
   &port-intro;
   <para>As a user, you can only modify certain port attributes. For any other changes,
   contact your cloud administrator.</para>
   <step>
    <para>
     Log in to &cloud; &dash;.
    </para>
   </step>
   <step>
    <para>
     If you are a member of multiple projects, select a <guimenu>Current
     Project</guimenu> at the top of the left navigation bar.
    </para>
   </step>
   <step>
    <para>
     Click the <guimenu>Networks</guimenu> category.
    </para>
   </step>
   <step>
    <para>
     Select a network and click its <guimenu>Network Name</guimenu> to view
     the details for the network.
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="cloud_dash_netw_details_users.png" width="100%" format="PNG" />
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="cloud_dash_netw_details_users.png" width="80%" format="PNG" />
      </imageobject>
     </mediaobject>
    </informalfigure>
   </step>
   <step>
    <para>
     Select a port to change and click <guimenu>Edit Port</guimenu>.
    </para>
   </step>
   <step>
    <para>
     In the window that opens, change the <guimenu>Name</guimenu> for the
     port. Its <guimenu>ID</guimenu> is also displayed, but cannot be
     changed.
    </para>
   </step>
   <step>
    <para> Leave the <guimenu>Admin State</guimenu> checkbox activated&mdash;unless you want the port to
     be marked as <literal>down</literal> and to not forward any traffic.</para>
   </step>
   <step>
    <para>
     Confirm your changes to close the dialog.
    </para>
   </step>
  </procedure>
  
 
  <procedure id="pro.user.dash.router.create">
   <title>Creating or Modifying Routers</title>
     &router-intro;
  <para>To add a router and to connect an external network to an internal one:</para>
  <step>
    <para>
     Log in to &cloud; &dash;.
    </para>
   </step>
   <step>
    <para>
     If you are a member of multiple projects, select a <guimenu>Current
     Project</guimenu> at the top of the left navigation bar.
    </para>
   </step>
   <step>
    <para>
     On the <guimenu>Project</guimenu> tab, select the
     <guimenu>Routers</guimenu> category.
    </para>
   </step>
   <step>
    <para>
     Click <guimenu>Create Router</guimenu>.
    </para>
    <para>
     The window that opens, enter a <guimenu>Router Name</guimenu> and
     confirm your choice.
    </para>
    <para>
     The <guimenu>Routers</guimenu> category shows the newly created router.
    </para>
   </step>
   <step>
    <para>
     To connect an external network to the router:
    </para>
    <substeps>
     <step>
      <para>
       Click <guimenu>Set Gateway</guimenu> for the newly created router.
      </para>
     </step>
     <step>
      <para>
       In the windows that opens, select the <guimenu>External
       Network</guimenu> which to connect to the router and confirm your
       choice.
      </para>
      <informalfigure>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="cloud_dash_routers_list_users.png" width="100%" format="PNG"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="cloud_dash_routers_list_users.png" width="80%" format="PNG"/>
        </imageobject>
       </mediaobject>
      </informalfigure>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     To connect a subnet to the router:
    </para>
    <substeps>
     <step>
      <para>
       Click the router's name to view the <guimenu>Router
       Details</guimenu>.
      </para>
     </step>
     <step>
      <para>
       Click <guimenu>Add Interface</guimenu>.
      </para>
     </step>
     <step>
      <para>
       In the window that opens, select the <guimenu>Subnet</guimenu> which
       to connect to the router and confirm your choice.
      </para>
      <para>
       A message on the Web page shows if the action has been successful.
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     After having created a new router and having connected it to an
     external network and a gateway, you can view a graphical representation
     of the network topology by switching to the <guimenu>Project</guimenu>
     tab and clicking <guimenu>Network Topology</guimenu>.
    </para>
   </step>
  </procedure>

  <figure>
   <title>&cloud; &dash;&mdash;Network Topology (User's View)</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="cloud_dash_netw_topo_users.png" width="100%" format="PNG" />
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cloud_dash_netw_topo_users.png" width="80%" format="PNG" />
    </imageobject>
   </mediaobject>
  </figure>
  
  <!--taroth 2013-10-04: first draft for https://bugzilla.novell.com/show_bug.cgi?id=841214-->
  <note>
   <title>Disabling <literal>rp_filter</literal></title>
   <para>If you use a Linux gateway in front of your cloud, and want to reach addresses other than
    public IPs (for example, admin=192.168.124.*), you have to disable the
     <literal>rp_filter</literal> on the gateway as follows:</para>
   <screen>echo 0 > /proc/sys/net/ipv4/conf/all/rp_filter</screen>
   <para>Alternatively, edit the <literal>rp_filter</literal> line in
     <filename>/etc/sysctl.conf</filename>.</para>
  </note>
  
  &network-ostack-guide;
  
 </sect1>
 <sect1 id="sec.user.dash.inst.launch">
  <title>Launching Instances</title>
  &instances;
  
  <sect2 id="sec.user.dash.inst.launch.params">
   <title>Key Parameters</title>
   <para>
    When starting an instance, you need to specify the following key
    parameters:
   </para>
   <variablelist>
    <varlistentry>
     <term>Flavor</term>
     <listitem> &flavors; <para>
       For more details and a list of default flavors available, refer to
       <xref linkend="sec.adm.dash.flavors"/>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Keypair</term>
     <listitem>&keypairs; <para>
       For details, refer to
       <xref
        linkend="sec.user.dash.inst.access.keys"/>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Security Group</term>
     <listitem>&security; <para>
       For details, refer to
       <xref
        linkend="sec.user.dash.inst.access.security"/>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Network</term>
     <listitem>
      <para>
       Instances can belong to one or multiple networks. By default, each
       instance is given a fixed IP address, belonging to the internal
       network.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    If needed, you can assign a floating (public) IP address to a running
    instance and attach a block storage device (<literal>volume</literal>)
    for persistent storage. For details, refer to
    <xref linkend="sec.user.dash.inst.access.ips"/> and
    <xref linkend="sec.user.dash.volumes"
    />.
   </para>
  </sect2>

  <sect2 id="sec.user.dash.inst.launch.from.vol">
   <title>Booting From Volumes</title>
   <para>
    You can start an instance directly from one of the images available in
    &ostack; &img; or from an image that you have copied to a persistent
    volume before. For the preparation of the volume, refer to
    <xref linkend="pro.user.instances.launch.prep.vol" xrefstyle="select:label"/>.
    When booting an image from a volume, the procedure is basically the same
    as when launching an instance from an image in &img;, except for some
    additional steps.
   </para>
   <procedure id="pro.user.instances.launch.prep.vol">
    <title>Creating and Preparing the Volume</title>
    <para>
     To be able to boot an instance from a volume, create the volume and
     copy an image to it:
    </para>
    <step>
     <para>
      Log in to &cloud; &dash;.
     </para>
    </step>
    <step>
     <para>
      If you are a member of multiple projects, select a <guimenu>Current
      Project</guimenu> at the top of the left navigation bar.
     </para>
    </step>
    <step id="step.user.dash.vol.create">
     <para>
      Create a volume as described in
      <xref linkend="pro.user.dash.vol.create"/>. Its size must be big
      enough to store an unzipped image.
     </para>
    </step>
    <step>
     <para>
      Create an image with &susestudio; or &suseonsite;. For details, refer
      to <xref
       linkend="sec.adm.cli.img.build"/>.
     </para>
    </step>
    <step>
     <para>
      Launch an instance as described in
      <xref linkend="sec.user.dash.instances.launch"/>. Make sure to set the
      respective <guimenu>Volume Options</guimenu>, as described in
      <xref linkend="pro.user.instances.launch"  xrefstyle="select:label
      title nopage"/>,
      from
      <xref linkend="step.launch.inst.vol.start" xrefstyle="select:label" />
      to
      <xref linkend="step.launch.inst.vol.stop" xrefstyle="select:label"/>.
     </para>
    </step>
    <step>
     <para>
      Use <command>scp</command> to copy the image created in &susestudio;
      or &suseonsite; to the instance to which you have attached the volume.
     </para>
    </step>
    <step>
     <para>
      Log in to the instance by using SSH or the VNC console.
     </para>
    </step>
    <step>
     <para>
      Assuming that the attached volume is mounted as
      <filename>/dev/vdb</filename>, use one of the following commands to
      copy the image to the attached volume:
     </para>
     <itemizedlist>
      <listitem>
       <para>
        For a raw image:
       </para>
<screen>cat&nbsp;<replaceable>IMAGE</replaceable>&nbsp;&gt;/dev/vdb</screen>
       <para>
        (alternatively, use <command>dd</command>)
       </para>
      </listitem>
      <listitem>
       <para>
        For a non-raw image:
       </para>
<screen>qemu-img convert -O raw&nbsp;<replaceable>IMAGE</replaceable>&nbsp;/dev/vdb</screen>
      </listitem>
      <listitem>
       <para>
        For a <filename>*.tar.bz2</filename> image:
       </para>
<screen>tar xfjO&nbsp;<replaceable>IMAGE</replaceable>&nbsp;&gt;/dev/vdb </screen>
      </listitem>
     </itemizedlist>
    </step>
    <step>
     <para>
      As the image comes with a predefined disk size (that might be smaller
      than the size of the volume it has been copied to), the image will not
      use the full size of the volume. To change this, adjust the partition
      table within the image to match the size of the volume.
     </para>
    </step>
    <step>
     <para>
      As only <emphasis>detached</emphasis> volumes are available for
      booting, detach the volume. For details on how to do so, refer to
      <xref linkend="pro.user.dash.vol.attach"/>,
      <xref linkend="step.user.dash.vol.detach" xrefstyle="select:label nopage"/>.
     </para>
    </step>
    <step>
     <para>
      For booting an instance from the volume, continue with
      <xref
       linkend="pro.user.instances.launch"/>.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.user.dash.instances.launch">
   <title>Launching an Instance</title>
   <para>
    You can start an instance directly from one of the images available in
    &ostack; &img;. In that case, &productname; will create a local copy of
    the image on the respective &compnode; where the instance will be
    started.
   </para>
   <note id="note.launch.inst.from.vol">
    <title>Launching Instances from a Volume</title>
    <para>
     Alternatively, you can start an instance from an image that has been
     copied to a persistent volume. In that case, the instance will be
     booted from the volume (provided by nova-volume) via iSCSI.
    </para>
    <para>
     For preparation details, refer to
     <xref linkend="pro.user.instances.launch.prep.vol"/>.
    </para>
    <para>
     To boot an instance from the volume, follow
     <xref linkend="pro.user.instances.launch"/>. Especially note the
     following:
    <!--taroth 2013-07-23: DEVs, is the following still valid? or have there
      been improvements for Essex and Grizzly? - taroth 2013-10-02: 
      nope, still the same, checked with bmwiedemann-->
    </para>
    <itemizedlist>
     <listitem>
      <para>
       <xref linkend="step.user.dash.inst.vol.1" xrefstyle="select:label  nopage"/>:
       To be able to select from which volume to boot, launch an instance
       from an arbitrary image. The image you select there will
       <emphasis>not</emphasis> be booted. It will be replaced by the image
       on the volume that you choose during the next steps.
      </para>
     </listitem>
     <listitem>
      <para>
       In case you want to boot a <emphasis>&xen;</emphasis> image from a
       volume, note the following requirement: The image you launch in
       <xref linkend="step.user.dash.inst.vol.1"
        xrefstyle="select:label nopage"/>
       needs to be of the same type (<literal>fully virtualized</literal> or
       <literal>paravirtualized</literal>) as the one on the volume.
      </para>
     </listitem>
    </itemizedlist>
   </note>
   <procedure id="pro.user.instances.launch">
    <title>Launching an Instance</title>
    <step>
     <para>
      Log in to &cloud; &dash;.
     </para>
    </step>
    <step>
     <para>
      If you are a member of multiple projects, select a <guimenu>Current
      Project</guimenu> at the top of the left navigation bar.
     </para>
    </step>
    <step>
     <para>
      Click the <guimenu>Images &amp; Snapshot</guimenu> category. The
      &dash; shows the <guimenu>Images</guimenu> that have been uploaded to
      &ostack; &img; and are available for this project.
     </para>
    </step>
    <step id="step.user.dash.inst.vol.1">
     <para>
      Select an image and click <guimenu>Launch</guimenu>.
     </para>
    </step>
    <step>
     <para>
      The <guimenu>Launch Instance</guimenu> dialog opens to the
      <guimenu>Details</guimenu> tab.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="cloud_dash_launch_inst_details.png" width="70%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="cloud_dash_launch_inst_details.png" width="70%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </informalfigure>
     <para>
      Depending on where you opened the dialog from, the values for the
      following drop-down lists on the <guimenu>Details</guimenu> tab are
      already preselected: <guimenu>Instance Source</guimenu> and
      <guimenu>Image</guimenu>. Specify the key parameters as follows.
     </para>
    </step>
    <step>
     <para>
      Enter an <guimenu>Instance Name</guimenu> that will be assigned to the
      virtual machine.
     </para>
    </step>
    <step>
     <para>
      From the <guimenu>Flavor</guimenu> drop-down list, select the
      <quote>size</quote> of the virtual machine to launch.
     </para>
    </step>
    <step>
     <para>
      In <guimenu>Instance Count</guimenu>, enter the number of virtual
      machines to launch from this image.
     </para>
    </step>
    <step>
     <para>
      Switch to the <guimenu>Access &amp; Security</guimenu> tab.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="cloud_dash_launch_inst_access.png" width="70%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="cloud_dash_launch_inst_access.png" width="70%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Select a <guimenu>Keypair</guimenu>. For details, refer to
      <xref
       linkend="sec.user.dash.inst.access.keys"/>. In case an
      image uses a static &rootuser; password or a static key set (neither
      is recommended), you do not need to provide a keypair on starting the
      instance.
     </para>
    </step>
    <step>
     <para>
      Activate the <guimenu>Security Groups</guimenu> that you want to
      assign to the instance. Security groups are a kind of cloud firewall
      that define which incoming network traffic should be forwarded to
      instances. For details, refer to
      <xref
       linkend="sec.user.dash.inst.access.security"/>. If you
      have not created any specific security groups, you can only assign the
      instance to the default security group.
     </para>
    </step>
    <step>
     <para>
      Switch to the <guimenu>Networking</guimenu> tab.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="cloud_dash_launch_inst_netw.png" width="70%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="cloud_dash_launch_inst_netw.png" width="70%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </informalfigure>
     <para>
      As long as you do not have configured a pool of floating IP addresses
      yet, the <guimenu>Available Networks</guimenu> list only shows the
      internal network with fixed IPs. For details about configuring
      floating IPs, refer to
      <xref
       linkend="pro.user.dash.allocate.floating.ips"/>.
     </para>
    </step>
    <step>
     <para>
      To move one of the <guimenu>Available Network</guimenu> to the
      <guimenu>Selected Networks</guimenu> field, click the plus icon next
      to the network. If you have specified multiple networks for the
      instance, change the NIC order in the <guimenu>Selected
      Networks</guimenu> field by drag and drop.
     </para>
     <para>
      With this step, you have set all key parameters for launching an
      instance.
     </para>
    </step>
    <step id="step.launch.inst.vol.start">
     <para>
      If you want to launch an instance from a volume, additionally specify
      the following parameters. For more information on launching instances
      from volumes, refer to
      <xref
       linkend="sec.user.dash.inst.launch.from.vol"/>.
     </para>
     <substeps>
      <step>
       <para>
        Switch to the <guimenu>Volume Options</guimenu> tab.
       </para>
       <informalfigure>
        <mediaobject>
         <imageobject role="fo">
          <imagedata fileref="cloud_dash_launch_inst_vol.png" width="70%" format="PNG"/>
         </imageobject>
         <imageobject role="html">
          <imagedata fileref="cloud_dash_launch_inst_vol.png" width="70%" format="PNG"/>
         </imageobject>
        </mediaobject>
       </informalfigure>
       <para>
        Its <guimenu>Volume Options</guimenu> drop-down list offers varying
        types of attached storage with which an instance can be launched.
       </para>
      </step>
      <step>
       <para>
        To launch the instance from a volume, select <literal>Boot from
        volume</literal> or <literal>Boot from volume snapshot (creates a
        new volume)</literal>.
       </para>
      </step>
      <step>
       <para>
        Select the <guimenu>Volume</guimenu> or <guimenu>Volume
        Snapshot</guimenu> to boot from.
       </para>
      </step>
      <step id="step.launch.inst.vol.stop">
       <para>
        Enter a <guimenu>Device Name</guimenu> (<literal>vda</literal> for
        &kvm; images, <literal>xvda</literal> for &xen; images).
       </para>
      </step>
     </substeps>
    </step>
    <step>
     <para>
      Click <guimenu>Launch Instance</guimenu>. The instance will be started
      on any of the &compnode;s in the cloud.
     </para>
    </step>
   </procedure>
   <para>
    After you have launched an instance, switch to the
    <guimenu>Instances</guimenu> category to view the <guimenu>Instance
    Name</guimenu>, its (private or public) <guimenu>IP address</guimenu>,
    its <guimenu>Size</guimenu>, the <guimenu>Keypair</guimenu> associated
    with it, the image's <guimenu>Status</guimenu>, its
    <guimenu>Task</guimenu>, and <guimenu>Power State</guimenu>.
   </para>
   <figure>
    <title>&cloud; &dash;&mdash;List of Launched Instances</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="cloud_dash_instances_volumes.png" width="100%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cloud_dash_instances_volumes.png" width="80%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    If you did not provide a keypair on starting and have not touched
    security groups or rules so far, by default the instance can only be
    accessed from inside the cloud via VNC at this point. Even pinging the
    instance is not possible. To change this, proceed with
    <xref
     linkend="sec.user.dash.inst.access"/>.
   </para>
  </sect2>
 </sect1>
 <sect1 id="sec.user.dash.inst.access">
  <title>Configuring Access to the Instances</title>
  &inst-access-params;
  
   
  <sect2 id="sec.user.dash.inst.access.security">
   <title>Configuring Security Groups and Rules</title>
   &security;
   <sect3 id="sec.user.dash.inst.access.security.groups">
    <title>Security Groups</title>
    &sec-groups;
   
    <procedure id="pro.cloud.dash.security.groups">
     <title>Creating or Deleting Security Groups</title>
     <step>
      <para>
       Log in to &cloud; &dash;.
      </para>
     </step>
     <step>
      <para>
       If you are a member of multiple projects, select a <guimenu>Current
       Project</guimenu> at the top of the left navigation bar.
      </para>
     </step>
     <step>
      <para>
       Click the <guimenu>Access &amp; Security</guimenu> category. It shows
       the following tabs: <guimenu>Security Groups</guimenu>,
       <guimenu>Keypairs</guimenu>, <guimenu>Floating IPs</guimenu>, and
       <guimenu>API Access</guimenu>.
      </para>
     </step>
     <step>
      <para>
       To create a new security group:
      </para>
      <substeps>
       <step>
        <para>
         Select the <guimenu>Security Groups</guimenu> tab and click
         <guimenu>Create Security Group</guimenu>.
        </para>
       </step>
       <step>
        <para>
         In the window that opens, enter a <guimenu>Name</guimenu> and
         <guimenu>Description</guimenu> for the group and confirm your
         changes.
        </para>
       </step>
      </substeps>
     </step>
     <step>
      <para>
       To delete one or multiple security groups:
      </para>
      <substeps>
       <step>
        <para>
         Activate the check boxes in front of the groups that you want to
         delete.
        </para>
       </step>
       <step>
        <para>
         Click <guimenu>Delete Security Groups</guimenu> and confirm your
         choice in the pop-up that appears.
        </para>
        <para>
         A message on the Web page shows if the action has been successful.
        </para>
       &note-groups-delete;
       <!--bmwiedemann 2012-08-26: terminating an instance to be able to delete a
        security goup (that does not require much bytes) sounds risky - 
        taroth 2012-08-27: bernhard is right, commenting-->
<!--To change that:
        <orderedlist>
         <listitem>
          <para>Switch to the <guimenu>Instances &amp; Volumes</guimenu> category 
           to view instances that have been launched.
          </para>
         </listitem>
         <listitem>
          <para>Click the instances' name links to view details such as the
           security group that is assigned to the respective instance.
          </para>
         </listitem>
         <listitem>
          <para>Terminate the instance belonging to the security group that you 
          want to delete. Relaunch the instance and assign it to another security 
          group.</para>
         </listitem>
        </orderedlist>-->
       </step>
      </substeps>
     </step>
    </procedure>
    <figure>
     <title>&cloud; &dash;&mdash;List of Security Groups</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="cloud_dash_sec_groups_list.png" width="100%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="cloud_dash_sec_groups_list.png" width="80%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
   </sect3>
   <sect3 id="sec.user.dash.inst.access.security.rules">
    <title>Security Group Rules</title>
    &sec-rules;
    
    &sec-rules-params;
    
    &security-default;
   
    <!--taroth 2012-08-27: IIRC, I read this in upstream docs, but according to
     bmwiedemann's tests, he could not access arbitrary ports of VMs in the same
     security group, therefore commenting-->
<!--Unless you change the rules for the default group, this means that
     those instances are only accessible from IP addresses belonging to other members 
     of this group.-->
    <procedure id="pro.cloud.dash.security.rules">
     <title>Configuring Security Group Rules</title>
     <step>
      <para>
       Log in to &cloud; &dash;.
      </para>
     </step>
     <step>
      <para>
       If you are a member of multiple projects, select a <guimenu>Current
       Project</guimenu> at the top of the left navigation bar.
      </para>
     </step>
     <step>
      <para>
       Click the <guimenu>Access &amp; Security</guimenu> category. It shows
       the following tabs: <guimenu>Security Groups</guimenu>,
       <guimenu>Keypairs</guimenu>, <guimenu>Floating IPs</guimenu>, and
       <guimenu>API Access</guimenu>.
      </para>
     </step>
     <step>
      <para>
       On the <guimenu>Security Group</guimenu> tab, click <guimenu>Edit
       Rules</guimenu> for the security group you want to modify. This opens
       the <guimenu>Edit Security Group Rules</guimenu> screen that shows
       the existing rules for the group and lets you add or delete rules.
       <remark>taroth 2013-07-25: unfortunately, it does not allow to _edit_ rules, filed
        bnc#831383 for this</remark>
      </para>
     </step>
     <step>
      <para>
       Click <guimenu>Add Rule</guimenu> to open a new dialog.
      </para>
     </step>
     <step>
      <para>
       To enable SSH access to the instances:
      </para>
      <substeps>
       <step>
        <para>
         Set <guimenu>IP Protocol</guimenu> to <literal>TCP</literal>.
        </para>
       </step>
       <step>
        <para>
         Select to <guimenu>Open</guimenu> a <literal>Port</literal>.
        </para>
       </step>
       <step>
        <para>
         In the <guimenu>Port</guimenu> input field, enter the value
         <guimenu>22</guimenu>.
        </para>
       </step>
       <step>
        <para>
         To enable access from <emphasis>all</emphasis> IP addresses
         (specified as IP subnet in CIDR notation as
         <literal>0.0.0.0/0</literal>), leave the <guimenu>Source</guimenu>
         and <guimenu>CIDR</guimenu> fields unchanged.
        </para>
        <para>
         Alternatively, allow only IP addresses from other security groups
         to access the specified port. In that case, set
         <guimenu>Source</guimenu> to <literal>Security Group</literal> and
         select the desired <guimenu>Security Group</guimenu> from the
         drop-down list.
        </para>
       </step>
       <step>
        <para>
         Confirm your changes to add the rule.
        </para>
       </step>
      </substeps>
     </step>
     <step>
      <para>
       To enable pinging the instances:
      </para>
      <substeps>
       <step>
        <para>
         Set <guimenu>IP Protocol</guimenu> to <literal>ICMP</literal>.
        </para>
       </step>
       <step>
        <para>
         Set both <guimenu>Type</guimenu> and <guimenu>Code</guimenu> to the
         value <literal>-1</literal>. This enables access to all codes and
         all types of ICMP traffic, respectively.
        </para>
        <para>
         A list of types and codes can be found at
         <ulink
          url="http://www.iana.org/assignments/icmp-parameters/icmp-parameters.xhtml"/>,
         for example.
        </para>
       </step>
       <step>
        <para>
         To enable access from <emphasis>all</emphasis> IP addresses
         (<literal>0.0.0.0/0</literal>), leave the <guimenu>Source</guimenu>
         and <guimenu>CIDR</guimenu> fields unchanged.
        </para>
        <para>
         Alternatively, allow only IP addresses from other security groups
         to access the specified port. In that case, set
         <guimenu>Source</guimenu> to <literal>Security Group</literal> and
         select the desired <guimenu>Security Group</guimenu> from the
         drop-down list.
        </para>
       </step>
       <step>
        <para>
         Confirm your changes to add the rule.
        </para>
       </step>
      </substeps>
     </step>
     <step>
      <para>
       To allow access via UDP port (for example, for a DNS server running
       on a VM):
      </para>
      <substeps>
       <step>
        <para>
         Set <guimenu>IP Protocol</guimenu> to <literal>UDP</literal>.
        </para>
       </step>
       <step>
        <para>
         Select to <guimenu>Open</guimenu> a <literal>Port</literal>.
        </para>
       </step>
       <step>
        <para>
         In the <guimenu>Port</guimenu> input field, enter the value
         <guimenu>53</guimenu>.
        </para>
       </step>
       <step>
        <para>
         To allow access from <emphasis>all</emphasis> IP addresses
         (<literal>0.0.0.0/0</literal>), leave the <guimenu>Source</guimenu>
         and <guimenu>CIDR</guimenu> fields unchanged.
        </para>
        <para>
         Alternatively, allow only IP addresses from other security groups
         to access the specified port. In that case, set
         <guimenu>Source</guimenu> to <literal>Security Group</literal> and
         select the desired <guimenu>Security Group</guimenu> from the
         drop-down list.
        </para>
       </step>
       <step>
        <para>
         Confirm your changes to add the rule.
        </para>
       </step>
      </substeps>
     </step>
    </procedure>
    <figure>
     <title>&cloud; &dash;&mdash;List of Security Group Rules</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="cloud_dash_sec_rules_list.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="cloud_dash_sec_rules_list.png" width="60%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <procedure>
     <title>Deleting Security Group Rules</title>
     <step>
      <para>
       Log in to &cloud; &dash;.
      </para>
     </step>
     <step>
      <para>
       If you are a member of multiple projects, select a <guimenu>Current
       Project</guimenu> at the top of the left navigation bar.
      </para>
     </step>
     <step>
      <para>
       Click the <guimenu>Access &amp; Security</guimenu> category. It shows
       the following tabs: <guimenu>Security Groups</guimenu>,
       <guimenu>Keypairs</guimenu>, <guimenu>Floating IPs</guimenu>, and
       <guimenu>API Access</guimenu>.
      </para>
     </step>
     <step>
      <para>
       On the <guimenu>Security Group</guimenu> tab, select the security
       group to modify and click <guimenu>Edit Rules</guimenu>. This opens
       the <guimenu>Edit Security Group Rules</guimenu> screen that shows
       the existing rules for the group and lets you add or delete rules.
       <remark>taroth 2013-07-25: unfortunately, it does not allow to _edit_ rules,
        filed bnc#831383 for this</remark>
      </para>
     </step>
     <step>
      <para>
       Select the rule or rules to remove.
      </para>
     </step>
     <step>
      <para>
       Click <guimenu>Delete Rules</guimenu> and confirm your choice.
      </para>
     </step>
    </procedure>
<!--taroth 2012-08-15: mention when non-default sec groups are useful (info
    by mvidner, for CLI chapter mention how to change security groups for running 
    instances, info by cthiel: 
    sure, this is possible, but AFAIK only through the command-line:
    
    usage: nova add-secgroup <server> <secgroup>
    Add a Security Group to a server.
    
    Positional arguments:
    <server>    Name or ID of server.
    <secgroup>  Name of Security Group.
    
    
    usage: nova remove-secgroup <server> <secgroup>
    
    Remove a Security Group from a server.
    
    Positional arguments:
    <server>    Name or ID of server.
    <secgroup>  Name of Security Group.
   -->
   </sect3>
  </sect2>

  <sect2 id="sec.user.dash.inst.access.keys">
   <title>Creating or Importing Keys</title>
   &keypairs;
   <procedure>
    <step>
     <para>
      Log in to &cloud; &dash;.
     </para>
    </step>
    <step>
     <para>
      If you are a member of multiple projects, select a <guimenu>Current
      Project</guimenu> at the top of the left navigation bar.
     </para>
    </step>
    <step>
     <para>
      Click the <guimenu>Access &amp; Security</guimenu> category. It shows
      the following tabs: <guimenu>Security Groups</guimenu>,
      <guimenu>Keypairs</guimenu>, <guimenu>Floating IPs</guimenu>, and
      <guimenu>API Access</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Switch to the <guimenu>Keypairs</guimenu> tab.
     </para>
    </step>
    <step>
     <para>
      To import a keypair that you have generated with an external tool:
     </para>
     <substeps>
      <step>
       <para>
        Click <guimenu>Import Keypair</guimenu>.
       </para>
      </step>
      <step>
       <para>
        In the window that opens, enter a name for the keypair and copy the
        public key into the respective input field.
       </para>
      </step>
      <step>
       <para>
        Confirm your choice.
       </para>
      </step>
     </substeps>
    </step>
    <step>
     <para>
      To create a new keypair:
     </para>
     <substeps>
      <step>
       <para>
        Click <guimenu>Create Keypair</guimenu>.
       </para>
      </step>
      <step>
       <para>
        In the window that opens, enter a name for the keypair and confirm
        your choice.
       </para>
       <para>
        &ostack; generates a keypair and provides the private key for
        download as a <filename>*.pem</filename> file.
       </para>
      </step>
      <step>
       <para>
        Save the <filename>*.pem</filename> file locally and change its
        permissions so that only you can read and write to the file:
       </para>
<screen>chmod 600 <replaceable>MY_PRIV_KEY</replaceable>.pem</screen>
      </step>
     </substeps>
    </step>
   </procedure>
   <para>
    The public key of the keypair is registered at the &comp; database. The
    &dash; lists the keypair in the <guimenu>Access &amp; Security</guimenu>
    category as shown in <xref linkend="fig.cloud.dash.keylist"/>.
   </para>
   <note>
    <title>Access from a Windows Machine</title>
    <para>If you want to access an instance via SSH from a Windows* machine, you need to convert the
     key from <literal>*.pem</literal> format to <literal>*.ppk</literal> format after downloading
     it. To do so on a Windows workstation:</para>
    <orderedlist>
     <listitem>
      <para>Open the <filename>puttykeygen.exe</filename> file. </para>
     </listitem>
     <listitem>
      <para>Click <guimenu>Load</guimenu> to open the <filename>*.pem</filename> file.</para>
     </listitem>
     <listitem>
      <para><guimenu>Save as</guimenu> public-private key (<filename>*.ppk</filename>).</para>
     </listitem>
    </orderedlist>
   </note>
   <figure id="fig.cloud.dash.keylist">
    <title>&cloud; &dash;&mdash;Keypairs</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="cloud_dash_access_security.png" width="100%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cloud_dash_access_security.png" width="80%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 id="sec.user.dash.inst.access.ips">
   <title>Managing IP Addresses</title>
   &ip-addr;
   <procedure id="pro.user.dash.allocate.floating.ips">
    <title>Allocating Floating (Public) IPs to a Project</title>
    &ip-allocate;
    <step>
     <para>
      Log in to &cloud; &dash;.
     </para>
    </step>
    <step>
     <para>
      If you are a member of multiple projects, select a <guimenu>Current
      Project</guimenu> at the top of the left navigation bar.
     </para>
    </step>
    <step>
     <para>
      Click the <guimenu>Access &amp; Security</guimenu> category. It shows
      the following tabs: <guimenu>Security Groups</guimenu>,
      <guimenu>Keypairs</guimenu>, <guimenu>Floating IPs</guimenu>, and
      <guimenu>API Access</guimenu>.
     </para>
    </step>
    <step>
     <para>
      To allocate a floating IP address to the current project:
     </para>
     <substeps>
      <step>
       <para>
        Switch to the <guimenu>Floating IPs</guimenu> tab.
       </para>
      </step>
      <step>
       <para>
        Click <guimenu>Allocate IP to Project</guimenu>.
       </para>
      </step>
      <step>
       <para>
        In the window that opens, select a <guimenu>Pool</guimenu> out of
        which to take the IP address.
       </para>
      </step>
      <step>
       <para>
        Click <guimenu>Allocate IP</guimenu>.
       </para>
       <para>
        The &dash; shows the allocated IP addresses for the project on the
        <guimenu>Floating IPs</guimenu> tab.
       </para>
       <informalfigure>
        <mediaobject>
         <imageobject role="fo">
          <imagedata fileref="cloud_dash_float_ip_list.png" width="100%" format="PNG"/>
         </imageobject>
         <imageobject role="html">
          <imagedata fileref="cloud_dash_float_ip_list.png" width="80%" format="PNG"/>
         </imageobject>
        </mediaobject>
       </informalfigure>
      </step>
     </substeps>
    </step>
    <step>
     <para>
      To release one or multiple floating IP addresses from a project:
     </para>
     <substeps>
      <step>
       <para>
        Activate the check boxes in front of the IP addresses that you want
        to release.
       </para>
      </step>
      <step>
       <para>
        Click <guimenu>Release Floating IPs</guimenu>. The IP addresses are
        put back into the pool of IP addresses that are available for all
        projects. If an IP address is currently assigned to a running
        instance, it will automatically be disassociated from the instance.
       </para>
      </step>
     </substeps>
    </step>
   </procedure>
   <procedure id="pro.user.dash.assign.floating.ips">
    <title>Assigning Floating (Public) IP Addresses to Instances</title>
    &ip-assign;
    <step>
     <para>
      Log in to &cloud; &dash;.
     </para>
    </step>
    <step>
     <para>
      If you are a member of multiple projects, select a <guimenu>Current
      Project</guimenu> at the top of the left navigation bar.
     </para>
    </step>
    <step>
     <para>
      Click the <guimenu>Access &amp; Security</guimenu> category. It shows
      the following tabs: <guimenu>Security Groups</guimenu>,
      <guimenu>Keypairs</guimenu>, <guimenu>Floating IPs</guimenu>, and
      <guimenu>API Access</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Switch to the <guimenu>Floating IPs</guimenu> tab.
     </para>
    </step>
    <step>
     <para>
      To assign an IP to an instance:
     </para>
     <substeps>
      <step>
       <para>
        Click <guimenu>Associate Floating IP</guimenu> button for the IP
        that you want to use for the instance.
       </para>
       <para>
        In the window that opens, the current IP address is preselected in
        the <guimenu>IP Address</guimenu> drop-down list. The drop-down list
        <guimenu>Port to be associated</guimenu> shows a list of running
        instances with the respective fixed IP address.
       </para>
      </step>
      <step>
       <para>
        Keep or change the floating IP address that is selected in
        <guimenu>IP Address</guimenu>.
       </para>
      </step>
      <step>
       <para>
        From <guimenu>Port to be associated</guimenu> select the instance to
        associate with the floating IP address.
       </para>
      </step>
      <step>
       <para>
        Confirm your choices.
       </para>
       <para>
        In the <guimenu>Access &amp; Security</guimenu> category, the
        <guimenu>Floating IPs</guimenu> tab shows the name of the instance
        with which the IP has been associated. The instance is now publicly
        available under the respective floating IPs address (provided you
        have also configured the security group rules for the instance
        accordingly). For details, refer to
        <xref linkend="sec.user.dash.inst.access.security"/>.
       </para>
      </step>
     </substeps>
    </step>
    <step>
     <para>
      To remove a floating IP address from an instance:
     </para>
     <substeps>
      <step>
       <para>
        On the <guimenu>Floating IPs</guimenu> tab, select the IP address to
        remove.
       </para>
      </step>
      <step>
       <para>
        Click <guimenu>Disassociate IP</guimenu> and confirm your change.
       </para>
      </step>
     </substeps>
    </step>
   </procedure>
   <figure>
    <title>&cloud; &dash;&mdash;Floating IPs Assigned to Instances</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="cloud_dash_float_ip_inst_list.png" width="100%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cloud_dash_float_ip_inst_list.png" width="80%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>
 </sect1>
 <sect1 id="sec.user.dash.inst.manage">
  <title>Managing Instances</title>

  <para>
   The following are typical tasks for managing instances:
  </para>

  <itemizedlist>
   <listitem>
    <para>
     Viewing logs
    </para>
   </listitem>
   <listitem>
    <para>
     Accessing instances from remote
    </para>
   </listitem>
   <listitem>
    <para>
     Creating instance snapshots to preserve a certain disk state of an
     instance
    </para>
   </listitem>
   <listitem>
    <para>
     Rebooting or terminating instances
    </para>
   </listitem>
   <listitem>
    <para>
     Pausing or suspending instances
    </para>
   </listitem>
   <listitem>
    <para>
     Tracking instance usage
    </para>
   </listitem>
  </itemizedlist>

  <sect2 id="sec.user.dash.inst.manage.logs">
   <title>Viewing Instance Logs</title>
   <procedure>
    <step>
     <para>
      Log in to &cloud; &dash;.
     </para>
    </step>
    <step>
     <para>
      If you are a member of multiple projects, select a <guimenu>Current
      Project</guimenu> at the top of the left navigation bar.
     </para>
    </step>
    <step>
     <para>
      Click the <guimenu>Instances</guimenu> category.
     </para>
    </step>
    <step>
     <para>
      Select the instance and from the <guimenu>More</guimenu> drop-down
      list, select <guimenu>View Log</guimenu>.
     </para>
     <para>
      Alternatively, click the instance's name and switch to the
      <guimenu>Log</guimenu> tab that opens.
     </para>
     <para>
      The &dash; shows the output of the instance's serial console.
     </para>
    </step>
   </procedure>
<!--taroth 2013-08-29: fix for https://bugzilla.novell.com/show_bug.cgi?id=830625 -->
   <para>
    To make use of this feature, the respective image must have set the
    serial console correctly in &grub;. To do so, append the following to
    the Kernel line in <filename>/boot/grub/grub.conf</filename>:
   </para>
<screen>console=tty0 console=ttyS0,115200</screen>
  </sect2>

  <sect2 id="sec.user.dash.inst.manage.remote">
   <title>Accessing Instances from Remote</title>
   <para>
    The &dash;'s built-in VNC client lets you access instances at any time.
   </para>
   <procedure>
    <title>Accessing an Instance via VNC</title>
    <step>
     <para>
      Log in to &cloud; &dash;.
     </para>
    </step>
    <step>
     <para>
      If you are a member of multiple projects, select a <guimenu>Current
      Project</guimenu> at the top of the left navigation bar.
     </para>
    </step>
    <step>
     <para>
      Click the <guimenu>Instances</guimenu> category.
     </para>
    </step>
    <step>
     <para>
      Select the instance to access and from the <guimenu>More</guimenu>
      drop-down list, select <guimenu>Console</guimenu>.
     </para>
     <para>
      Alternatively, click the instance's name and switch to the
      <guimenu>Console</guimenu> tab that opens.
     </para>
    </step>
    <step>
     <para>
      When establishing the first connection, you might be prompted by your
      browser to trust a certificate before you can see the VNC screen.
     </para>
    </step>
    <step>
     <para>
      To display a larger VNC screen, use the link <guimenu>Click here to
      show only console</guimenu>.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="cloud_dash_vnc.png" width="70%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="cloud_dash_vnc.png" width="60%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      To leave the large VNC screen, use the back button of the browser.
     </para>
    </step>
   </procedure>

    &ssh-req;
   <!--For details, refer to <xref linkend="sec.user.dash.inst.access.security"/>.-->
<!--For details, refer to <xref linkend="sec.user.dash.inst.access.ips"/>.-->
  </sect2>

  <sect2 id="sec.user.dash.inst.manage.snapshots">
   <title>Using Instance Snapshots</title>
   &inst-snap;
   <para>
    As snapshots capture the state of the file system, but not the state of
    the memory, consider the following guidelines before taking snapshots:
    <ulink
     url="http://docs.openstack.org/grizzly/openstack-ops/content/snapsnots.html#consistent_snapshots"
    />.
   </para>
   <!--taroth 2013-09-17: fix for bnc#839364-->
   <note>
    <title>Removing Former Keypairs</title>
    <para>After an instance has once been launched with a certain keypair (that is injected into the
     respective image by <filename>cloud-init</filename> during start), the keypair will stick to
     that instance. Unless you remove the former keypair from the instance it is 
     impossible to restart the instance with a different keypair than the original one. This is also
     true for snapshots taken from an instance. </para>
    <para>Run the following command within the instance to remove the former data (for example, to
     prepare an instance for a snapshot):</para>
    <screen>rm -rf /var/lib/cloud/instances/*</screen>
    <para>After the clean-up, a new keypair can be injected into the instance.</para>
   </note>
   <procedure>
    <title>Creating Instance Snapshots</title>
    <step>
     <para>
      Log in to &cloud; &dash;.
     </para>
    </step>
    <step>
     <para>
      If you are a member of multiple projects, select a <guimenu>Current
      Project</guimenu> at the top of the left navigation bar.
     </para>
    </step>
    <step>
     <para>
      Click the <guimenu>Instances</guimenu> category.
     </para>
    </step>
    <step>
     <para>
      Click <guimenu>Create Snapshot</guimenu> next to the instance that you
      want to snapshot.
     </para>
    </step>
    <step>
     <para>
      In the window that opens, enter a name for the snapshot and confirm
      your changes. The &dash; shows the new snapshot in the <guimenu>Images
      &amp; Snapshot</guimenu> category below the heading <guimenu>Instance
      Snapshot</guimenu>. Technically, an instance snapshot is an image, too
      and is automatically uploaded to Glance. The only difference compared
      to an image that has been directly uploaded to &ostack; &img; is the
      following: images created by snapshots have additional properties in
      the &o_img; database.
     </para>
    </step>
    <step>
     <para>
      To launch a new instance from the snapshot, select the snapshot and
      click <guimenu>Launch</guimenu>. Proceed with launching an instance as
      described in <xref linkend="pro.user.instances.launch"/>.
     </para>
    </step>
   </procedure>
   <figure>
    <title>&cloud; &dash;&mdash;List of Images &amp; Snapshots</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="cloud_dash_img_snap.png" width="100%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cloud_dash_img_snap.png" width="80%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 id="sec.user.dash.inst.manage.terminate">
   <title>Controlling Instance State (Pause, Suspend, Reboot, Terminate)</title>
   &inst-terminate;
   
   &inst-terminate-warn;
  
   <procedure>
    <step>
     <para>
      Log in to &cloud; &dash;.
     </para>
    </step>
    <step>
     <para>
      If you are a member of multiple projects, select a <guimenu>Current
      Project</guimenu> at the top of the left navigation bar.
     </para>
    </step>
    <step>
     <para>
      Click the <guimenu>Instances</guimenu> category.
     </para>
    </step>
    <step>
     <para>
      Select the instance that you want to put out of the running state.
      From the <guimenu>More</guimenu> drop-down list, select the respective
      action.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.user.dash.inst.manage.usage">
   <title>Tracking Usage</title>
   <para>
    Use the &dash;'s <guimenu>Overview</guimenu> category to track usage of
    instances per project. This lets you track costs per month by showing
    metrics like number of VCPUs, disks, RAM, and uptime of all your
    instances. The <guimenu>Overview</guimenu> category also shows a
    <guimenu>Quota Summary</guimenu>.
   </para>
   <procedure>
    <title>Querying Instance Usage</title>
    <step>
     <para>
      Log in to &cloud; &dash;.
     </para>
    </step>
    <step>
     <para>
      If you are a member of multiple projects, select a <guimenu>Current
      Project</guimenu> at the top of the left navigation bar.
     </para>
    </step>
    <step>
     <para>
      Click the <guimenu>Overview</guimenu> category. It lets you track
      usage of instances per project and costs per month. The upper part of
      the page also shows a <guimenu>Quota Summary</guimenu>.
     </para>
    </step>
    <step>
     <para>
      In <guimenu>Select a month to query its usage</guimenu>, select a
      month and a year to query and click <guimenu>Submit</guimenu>.
     </para>
     <para>
      The <guimenu>Usage Summary</guimenu> table shows the results of your
      query and displays metrics like the number of VCPUs, disks, RAM, and
      uptime of all your instances. It is also possible to download a CVS
      summary.
     </para>
    </step>
   </procedure>
   <figure>
    <title>&cloud; &dash;&mdash;Usage Overview</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="cloud_dash_overview_usage.png" width="100%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cloud_dash_overview_usage.png" width="80%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>
 </sect1>
 <sect1 id="sec.user.dash.volumes">
  <title>Managing Volumes</title>
  &volumes;

  <procedure id="pro.user.dash.vol.create">
   <title>Creating or Deleting Volumes</title>
   <step>
    <para>
     Log in to &cloud; &dash;.
    </para>
   </step>
   <step>
    <para>
     If you are a member of multiple projects, select a <guimenu>Current
     Project</guimenu> at the top of the left navigation bar.
    </para>
   </step>
   <step>
    <para>
     Click the <guimenu>Volumes</guimenu> category.
    </para>
   </step>
   <step>
    <para>
     To create a volume:
    </para>
    <substeps>
     <step>
      <para>
       Click <guimenu>Create Volume</guimenu>.
      </para>
     </step>
     <step>
      <para>
       In the window that opens, enter a <guimenu>Volume Name</guimenu> to
       assign to a volume, a description (optional), and define the size in
       GB. If a volume type has been defined by a cloud administrator
       (specifying the capabilities of the storage back-end drivers to be
       used), select the desired <guimenu>Type</guimenu> from the drop-down
       list.
      </para>
     </step>
     <step>
      <para>
       Confirm your changes.
      </para>
      <para>
       The &dash; shows the volume in the <guimenu>Volumes</guimenu>
       category.
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     To delete one or multiple volumes:
    </para>
    <substeps>
     <step>
      <para>
       Activate the check boxes in front of the volumes that you want to
       delete.
      </para>
     </step>
     <step>
      <para>
       Click <guimenu>Delete Volumes</guimenu> and confirm your choice in
       the pop-up that appears. Volumes that are attached to an instance
       cannot be deleted.
      </para>
      <para>
       A message on the Web page shows if the action has been successful.
      </para>
     </step>
    </substeps>
   </step>
  </procedure>

  <para>
   &vol-attach; View the <guimenu>Status</guimenu> of a volume in the
   <guimenu>Volumes</guimenu> category of the &dash;: the <guimenu>Attached
   To</guimenu> column tells you if the volume is still available or already
   in use.
  </para>

  <figure>
   <title>&cloud; &dash;&mdash;List of Volumes</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="cloud_dash_vol_attachments.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cloud_dash_vol_attachments.png" width="80%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <procedure id="pro.user.dash.vol.attach">
   <title>Attaching Volumes to Instances</title>
   <step>
    <para>
     Log in to &cloud; &dash;.
    </para>
   </step>
   <step>
    <para>
     If you are a member of multiple projects, select a <guimenu> Current
     Project</guimenu> at the top of the left navigation bar.
    </para>
   </step>
   <step>
    <para>
     Click the <guimenu>Volumes</guimenu> category.
    </para>
   </step>
   <step>
    <para>
     Select the volume to add to an instance and click <guimenu>Edit
     Attachments</guimenu>.
    </para>
   </step>
   <step>
    <para>
     In the window that opens, select an instance to attach the volume to.
    </para>
   </step>
   <step>
    <para>
     Enter a <guimenu>Device Name</guimenu> under which the volume should be
     accessible on the virtual machine.
    </para>
<!--taroth 2013-08-29: fix for https://bugzilla.novell.com/show_bug.cgi?id=835356-->
    <note>
     <title>KVM and Device Naming</title>
     <para> If you are using KVM as hypervisor, the resulting device name in the guest may be
      different than the one specified in the &dash; or in the
      <command>nova&nbsp;volume-attach</command> command. The device will be attached to the
      guest over a virtual PCI bus. When the guest sees a new device on the PCI bus, it picks the
      next available name, which is <filename>/dev/vdc</filename> in most cases. For
       <literal>m1.tiny</literal> flavors the volume is typically attached as
       <filename>/dev/vdb</filename> because it does not have a second
      local disk, unlike the other flavors.</para>
    </note>
   </step>
   <step>
    <para>
     Confirm your changes. The &dash; shows the instance to which the volume
     has been attached and the volume's device name.
    </para>
   </step>
   <step>
    <para>
     Now you can log in to the instance, mount the disk, format it, and use
     it.
    </para>
    <note>
     <title>Instances Running Older Kernel Versions</title>
     <para>
      If one of the instances runs a Kernel version that was shipped prior
      to &sle; 11 SP2, you need to reboot the instance to make the device
      appear.
     </para>
     <para>
      For instances running the &sls; SP2 Kernel (or later), it is enough to
      load the <literal>acpiphp</literal> module manually:
     </para>
<screen>modprobe acpiphp</screen>
    </note>
   </step>
   <step id="step.user.dash.vol.detach">
    <para>
     To detach a volume from an instance:
    </para>
    <substeps>
     <step>
      <para>
       Select the volume and click <guimenu>Edit Attachments</guimenu>.
      </para>
     </step>
     <step>
      <para>
       In the window that opens, click <guimenu>Detach Volume</guimenu> and
       confirm your changes.
      </para>
      <para>
       A message on the Web page shows if the action has been successful.
      </para>
     </step>
    </substeps>
   </step>
  </procedure>

  <procedure>
   <title>Creating Volume Snapshots</title>
   &vol-snap;
   <step>
    <para>
     Log in to &cloud; &dash;.
    </para>
   </step>
   <step>
    <para>
     If you are a member of multiple projects, select a <guimenu>Current
     Project</guimenu> at the top of the left navigation bar.
    </para>
   </step>
   <step>
    <para>
     Click the <guimenu>Volumes</guimenu> category.
    </para>
   </step>
   <step>
    <para>
     Check if the volume of which to create a snapshot is <guimenu>Attached
     To</guimenu> an instance. If yes, click <guimenu>Edit
     Attachments</guimenu>, click <guimenu>Detach Volume</guimenu> in the
     window that opens and confirm your choice.
    </para>
   </step>
   <step>
    <para>
     From the <guimenu>More</guimenu> drop-down list, select <guimenu>Create
     Snapshot</guimenu>.
    </para>
   </step>
   <step>
    <para>
     In the window that opens, enter a <guimenu>Snapshot Name</guimenu> and
     a <guimenu>Description</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Confirm your changes. The &dash; shows the new <guimenu>Volume
     Snapshot</guimenu> in the <guimenu>Images &amp; Snapshots</guimenu>
     category.
    </para>
   </step>
  </procedure>

  <figure>
   <title>&cloud; &dash;&mdash;List of Images &amp; Snapshots</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="cloud_dash_images_and_snapshots.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cloud_dash_images_and_snapshots.png" width="80%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect1>
</chapter>
