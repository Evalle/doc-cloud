<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet
 href="urn:x-daps:xslt:profiling:novdoc-profile.xsl" 
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "IGNORE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<chapter id="cha.user.dash">
 <title>Using &cloud; &dash;</title>
 <abstract>
  <para>Instances are virtual machines that run inside the cloud. To start
  an instance, you must have a virtual machine image that contains the following 
  information: which operating system to use, a user name and password with which 
  to log in to the &vmguest;, file storage etc. The cloud contains
  a pool of such images that have been uploaded and made
  accessible to members of different projects. Apart from the image to use,
  you also need to specify the <quote>size</quote> of the VM to start 
  (called <literal>flavor</literal> in &ostack;). If 
  you want to make the virtual machine accessible from outside the
	cloud, you need to configure security groups. If needed, block storage
	devices (<literal>volumes</literal>) can be attached to a running
	instance (or detached and attached to another instance at any time).</para>
 </abstract>
 <para>
  <remark>taroth 2012-08-22: DEVs, I'm in the process of restucturing the chapter
  (moving topics around for a more logical order), I will fill the skeleton sections
  below with the respective contents tomorrow - feel free to answer any 
  DEVs questions in the meantime :)</remark>
 </para>

 <sect1 id="sec.user.dash.req">
  <title>Requirements</title>
  <para></para>
 </sect1>

 <sect1 id="sec.user.dash.intro">
  <title>&cloud; &dash;&mdash;Overview</title>
  <para></para>
 </sect1>
 <sect1 id="sec.user.dash.img">
  <title>Managing Images</title>
  <para>
   Images cannot be added from the &cloud; &dash;, you need to use the
   command line tool <command>glance add</command> instead. For details,
   refer to <xref linkend="sec.adm.cli.img.upload"/>.
  </para>
 </sect1>

 <sect1 id="sec.user.dash.inst.launch">
  <title>Launching Instances</title>
  <para></para>
  <para>After you have created or imported a keypair, you are now ready to launch 
   an instance in the cloud.</para>
  <procedure id="pro.user.instances.launch">
   <title>Launching an Instance with the &cloud; &dash;</title>
   <step>
    <para>Log in to &cloud; &dash; with your user name and password.</para>
   </step>
   <step>
    <para>If you are a member of multiple projects, select a project from the 
     drop-down list at the top of the <guimenu>Projects</guimenu>
     tab.</para>
   </step>
   <step>
    <para>Click the <guimenu>Images &amp; Snapshot</guimenu> category. The &dash;
     shows the <guimenu>Images</guimenu> that have been uploaded to Glance and
     are available for this project, plus the <guimenu>Instance Snaphots</guimenu>, 
     and <guimenu>Volume Snapshots</guimenu> for the selected project. 
    </para>
   </step>
   <step>
    <para>Select an image and click <guimenu>Launch</guimenu>.</para>
   </step>
   <step>
    <para>In the window that opens, specify the following:</para>
    <substeps>
     <step>
      <para>Enter a <guimenu>Server Name</guimenu> that will be assigned to the
       virtual machine.</para>
     </step>
     <step>
      <para>From the <guimenu>Flavor</guimenu> drop-down list, select the 
       <quote>size</quote> of the virtual machine to launch.</para>
     </step>
     <step>
      <para>From the <guimenu>Keypair</guimenu> drop-down list,
       select one of the keypairs that you created beforehand. 
       For details, refer to <xref linkend="sec.user.dash.inst.access.keys"/>..
       The public key
       will be injected to the image and will allow you to log in to
       the instance via SSH (provided you have allowed SSH access
       in the security group that is assigned to the image).</para>
     </step>
     <step>
      <para>Set the <guimenu>Instance Count</guimenu> to the number of 
       virtual machines to launch from this image.</para>
     </step>
     <step>
      <para>Activate the <guimenu>Security Groups</guimenu> that you want to
       assign to the instance. If you did not create any specific security groups,
       you can only assign the instance to the default security group. For more 
       information, refer to <xref linkend="sec.user.dash.inst.access.security"/>.</para>
      <para>On the right-hand side, a chart shows the resources that are used 
       by any running instances. You can check the current quota settings for 
       the project and compare them to the resources that will be used by this 
       instance.</para>
      <informalfigure>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="cloud_dash_launch_instance.png" width="100%" format="PNG"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="cloud_dash_launch_instance.png" width="80%" format="PNG"/>
        </imageobject>
       </mediaobject>
      </informalfigure>
     </step>
     <step>
      <para>If all parameters are set according to your wishes, click 
       <guimenu>Launch Instance</guimenu>. The instance will be started on any of
       the &compnode; in the cloud. The &dash; shows the instance's status in the 
       <guimenu>Instances &amp; Volumes</guimenu> category.
      </para>
     </step>
    </substeps>
   </step>
  </procedure>
  <para>After you have launched an instance, the 
   <guimenu>Instances &amp; Volumes</guimenu> shows the instance's name, its
   (private or public) IP addresses, its size, its status, tasks, and power
   state.</para>
  <figure>
   <title>&cloud; &dash;&mdash;List of Launched Instances</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="cloud_dash_instances_volumes.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cloud_dash_instances_volumes.png" width="80%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
  
 </sect1>

 <sect1 id="sec.user.dash.inst.access">
  <title>Configuring Access to the Instances</title>
  <para></para>

  <sect2 id="sec.user.dash.inst.access.keys">
   <title>Creating or Importing Keys</title>
   <para></para>
   <para>Keypairs are SSH credentials that are injected into images when they are
    launched. Create or import at least one keypair per project. You can use the 
    keypair for multiple instances belong to that project.</para>
   <para>If your images use a static &rootuser; password or a static key
    set (neither is recommended), you do not need to provide keypairs.  
   </para>
   <procedure>
    <title>Creating a Keypair</title>
    <para>To allow login to an instance via SSH, create a keypair. If you have
     already created a keypair with an external tool, you can import it into
     &ostack;
    </para>
    <step>
     <para>Log in to &cloud; &dash; with your user name and password.</para>
    </step>
    <step>
     <para>If you are a member of multiple projects, select a project from the 
      drop-down list at the top of the <guimenu>Projects</guimenu>
      tab.</para>
    </step>
    <step>
     <para>Click the <guimenu>Access &amp; Security</guimenu> category. The &dash;
      shows <guimenu>Floating IPs</guimenu>, <guimenu>Security Groups</guimenu>, and
      <guimenu>Keypairs</guimenu> for the selected project.</para>
    </step>
    <step>
     <para>To import a keypair that you have generated with an external tool:</para>
     <substeps>
      <step>
       <para>Click <guimenu>Import Keypair</guimenu>.</para>
      </step>
      <step>
       <para>In the window that opens, enter a name for the keypair and
        copy the public key into the respective input field.</para>
      </step>
      <step>
       <para>Confirm your choice to make &ostack; register the public key at
        the Nova database.</para>
      </step>
     </substeps>
    </step>
    <step>
     <para>To create a new keypair:</para>
     <substeps>
      <step>
       <para>Click <guimenu>Create Keypair</guimenu>.</para>
      </step>
      <step>
       <para>In the window that opens, enter a name for the keypair and confirm 
        your choice.</para>
       <para>&ostack; generates a keypair and registers the public key at the Nova
        database. It provides the private key for download as a <filename>*.pem</filename>
        file.</para>
      </step>
      <step>
       <para>Save the <filename>*.pem</filename> file locally and change its 
        permissions so that only you can read and write to the file:</para>
       <screen>chmod 600 <replaceable>MY_PRIV_KEY</replaceable>.pem</screen>
      </step>
     </substeps>
    </step>
   </procedure>
   <para>The newly created or imported keypair is listed in the 
    <guimenu>Access &amp; Security</guimenu> category:</para>
   <figure>
    <title>&cloud; &dash;&mdash;Keypairs</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="cloud_dash_access_security.png" width="100%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cloud_dash_access_security.png" width="80%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   
  </sect2>

  <sect2 id="sec.user.dash.inst.access.security">
   <title>Configuring Security Groups and Rules</title>
   <para></para>
   <para>In &productname;, security groups are used to define which incoming 
    network traffic should be forwarded to instances. When launching an instance, 
    you need to define which security groups it should belong to. A default 
    security group is available for each project. It allows all network traffic
    from other members of this group and discards traffic from other IP addresses 
    and groups.</para>
   <para>Of course, rules of the default security group can be modified. 
    If necessary, you can also define multiple security groups for a project with 
    each group holding a different set of firewall policies. This is useful if you
    have groups of instances that should differ in firewall configuration (for example,
    front-end and back-end servers). An instance can also be assigned to multiple 
    security groups.</para>
   <para>As soon as the rules for a group a modified, the new rules are automatically 
    applied to all running instances belonging to that security group and to any 
    instances launched from then on.</para>
   <procedure>
    <title>Creating Or Deleting Security Groups with &cloud; &dash;</title>
    <step>
     <para>Log in to &cloud; &dash; with your user name and password.</para>
    </step>
    <step>
     <para>If you are a member of multiple projects, select a project from the 
      drop-down list at the top of the <guimenu>Projects</guimenu>
      tab.</para>
    </step>
    <step>
     <para>Click the <guimenu>Access &amp; Security</guimenu> category. The &dash;
      shows <guimenu>Floating IPs</guimenu>, <guimenu>Security Groups</guimenu>, and
      <guimenu>Keypairs</guimenu> for the selected project.</para>
    </step>
    <step>
     <para>To create a new security group:</para>
     <substeps>
      <step>
       <para>Click <guimenu>Create Security Group</guimenu>. 
       </para>
      </step>
      <step>
       <para>In the window that opens, enter a <guimenu>Name</guimenu> and 
        <guimenu>Description</guimenu> for the group and confirm your changes.</para>
       <para>The &dash; shows the newly created group in the <guimenu>Access &amp; 
        Security</guimenu> category.
       </para>
      </step>
     </substeps>
    </step>
    <step>
     <para>
      To delete one or multiple security groups:
     </para>
     <substeps>
      <step>
       <para>
        Activate the check boxes in front of the groups that you want to
        delete.
       </para>
      </step>
      <step>
       <para>
        Click <guimenu>Delete Security Groups</guimenu> and confirm your choice in the
        pop-up that appears.
       </para>
       <para>
        A message on the Web page shows if the action has been successful.
       </para>
       <note>
        <title>Deleting Security Groups</title>
        <para>The default security group for a project cannot be deleted.</para>
        <para>
         In case another group cannot be deleted, it is still assigned to a
         running instance.
        </para>
        <orderedlist>
         <listitem>
          <para>Switch to the <guimenu>Instances &amp; Volumes</guimenu> category 
           to view instances that have been launched.
          </para>
         </listitem>
         <listitem>
          <para>Click the instances' name links to view details such as the
           security group that is assigned to the respective instance.
          </para>
         </listitem>
         <listitem>
          <para>Terminate the instance which is member of the security 
           group that you want to delete. Relaunch the instance and assign it to 
           another security group.</para>
         </listitem>
        </orderedlist>
       </note>
      </step>
     </substeps>
    </step>
   </procedure>
   
   <procedure>
    <title>Configuring Security Group Rules with &cloud; &dash;</title>
    <para>Security rules are specified by the following parameters:</para>
    <itemizedlist>
     <listitem>
      <para>Source of traffic (IP subnet in CIDR notation or another security group)</para>
     </listitem>
     <listitem>
      <para>Protocol (TCP, UDP, ICMP)</para>
     </listitem>
     <listitem>
      <para>Destination port (port range) on virtual machine</para>
     </listitem>
    </itemizedlist>
    <para>If no further security groups have been created, any instances are 
     automatically assigned to the default security group (if not specified
     otherwise). Unless you change the rules for the default group, this means that
     those instances are only accessible from IP addresses belonging to other members 
     of this group and not from any IP addresses outside.
    </para>
    <step>
     <para>Log in to &cloud; &dash; with your user name and password.</para>
    </step>
    <step>
     <para>If you are a member of multiple projects, select a project from the 
      drop-down list at the top of the <guimenu>Projects</guimenu>
      tab.</para>
    </step>
    <step>
     <para>Click the <guimenu>Access &amp; Security</guimenu> category. The &dash;
      shows <guimenu>Floating IPs</guimenu>, <guimenu>Security Groups</guimenu>, and
      <guimenu>Keypairs</guimenu> for the selected project.</para>
    </step>
    <step>
     <para>
      Select the group to modify and click <guimenu>Edit Rules</guimenu>. The window 
      that appears shows which rules have already been configured. 
     </para>
    </step>
    <step>
     <para>To allow SSH access to the instances:</para>
     <substeps>
      <step>
       <para>Set <guimenu>IP Protocol</guimenu> to <literal>TCP</literal>.</para>
      </step>
      <step>
       <para>Enter the value <literal>22</literal> in both
        <guimenu>From Port</guimenu> and <guimenu>To Port</guimenu>. The port fields
        specify a range of ports. In this case, only port <literal>22</literal>
        is opened.</para>
      </step>
      <step>
       <para>To allow access from <emphasis>all</emphasis> IP addresses (specified 
        in CIDR notation as <literal>0.0.0.0/0</literal>), leave the other fields 
        unchanged.
       </para>
       <para>Alternatively, you can limit the SSH access to the specified port to
        access from other security groups only. In that case, select the desired 
        security group from the <guimenu>CIDR</guimenu> drop-down list. </para>
      </step>
      <step>
       <para>Confirm your changes to add the rule.</para>
      </step>
     </substeps>
    </step>
    <step>
     <para>
      <remark>taroth 2012-08-15: DEVs, is the following correct?</remark>
      To allow pinging the instances:</para>
     <substeps>
      <step>
       <para>Set <guimenu>IP Protocol</guimenu> to <literal>ICMP</literal>.
       </para>
      </step>
      <step>
       <para>Enter the value <literal>-1</literal> in both <guimenu>From
        Port</guimenu> and <guimenu>To Port</guimenu>. As ICPM does not use ports,
        with <literal>-1</literal> we allow access to all codes and all types of
        ICMP traffic, respectively.</para>
      </step>
      <step>
       <para>To allow access from <emphasis>all</emphasis> IP addresses 
        (<literal>0.0.0.0/0</literal>), leave the other fields unchanged.
       </para>
       <para>Alternatively, to allow only members of other security groups to ping
        instances, select the desired security group from the <guimenu>CIDR</guimenu>
        drop-down list.</para>
      </step>
      <step>
       <para>Confirm your changes to add the rule.</para>
      </step>
     </substeps>
    </step>
    <step>
     <para>To allow access via UDP port 53 (for example, for an DNS server
      running on a VM:</para>
     <substeps>
      <step>
       <para>Set <guimenu>IP Protocol</guimenu> to <literal>UDP</literal>.</para>
      </step>
      <step>
       <para>Enter the value <literal>53</literal> in both
        <guimenu>From Port</guimenu> and <guimenu>To Port</guimenu>. The port fields
        specify a range of ports. In this case, only port <literal>53</literal>
        is opened.</para>
      </step>
      <step>
       <para>To allow access from <emphasis>all</emphasis> IP addresses (specified 
        in CIDR notation as <literal>0.0.0.0/0</literal>), leave the other fields 
        unchanged.
       </para>
       <para>Alternatively, you can limit the SSH access to the specified port to
        access from other security groups only. In that case, select the desired 
        security group from the <guimenu>CIDR</guimenu> drop-down list. </para>
      </step>
      <step>
       <para>Confirm your changes to add the rule.</para>
      </step>
     </substeps>
    </step>
   </procedure>
   <figure>
    <title>&cloud; &dash;&mdash;Adding Security Rules</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="cloud_dash_sec_groups_add_rule.png" width="100%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cloud_dash_sec_groups_add_rule.png" width="80%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   
   <!--taroth 2012-08-15: mention when non-default sec groups are useful (info
    by mvidner, for CLI chapter mention how to change security groups for running 
    instances, info by cthiel: 
    sure, this is possible, but AFAIK only through the command-line:
    
    usage: nova add-secgroup <server> <secgroup>
    Add a Security Group to a server.
    
    Positional arguments:
    <server>    Name or ID of server.
    <secgroup>  Name of Security Group.
    
    
    usage: nova remove-secgroup <server> <secgroup>
    
    Remove a Security Group from a server.
    
    Positional arguments:
    <server>    Name or ID of server.
    <secgroup>  Name of Security Group.
   -->
  </sect2>

  <sect2 id="sec.user.dash.inst.access.ips">
   <title>Managing IP Addresses</title>
   <para></para>
   <para>Each instance can have two IP addresses: a private and a public one. 
    Private IP addresses are used for communication between instances, public
    ones for communication with the outside world. When an instance is launched,
    it is automatically assigned a private IP address which stays the same
    until the instance is explicitly terminated.<remark>taroth 2012-08-22: DEVs: 
     does an instance also lose its private IP on reboot?</remark> 
    From the pool of floating IPs available in &ostack; Nova, you can assign a 
    public IP address to instances. Floating IP addresses can be dynamically 
    disassociated and associated with other instances at any time.
    <remark>taroth 2012-08-21: DEVs, whose task
     is it to create floating IPs in the first place? admin? operator? and is
     there more than the Nova pool to allocate IPs from?</remark>
   </para>
   <procedure>
    <title>Allocating or Releasing Floating (Public) IPs</title>
    <para>Before you can assign a floating IP address to an instance, you first 
     need to allocate floating IPs to a project.</para>
    <step>
     <para>Log in to &cloud; &dash; with your user name and password.</para>
    </step>
    <step>
     <para>If you are a member of multiple projects, select a project from the 
      drop-down list at the top of the <guimenu>Projects</guimenu>
      tab.</para>
    </step>
    <step>
     <para>Click the <guimenu>Access &amp; Security</guimenu> category. The &dash;
      shows a list of <guimenu>Floating IPs</guimenu>, <guimenu>Security Groups</guimenu>,
      and <guimenu>Keypairs</guimenu> for the current project. 
     </para>
    </step>
    <step>
     <para>To allocate a floating IP address to the current project:</para>
     <substeps>
      <step>
       <para>Click <guimenu>Allocate IP to Project</guimenu>.</para>
      </step>
      <step>
       <para>In the window that opens, select a <guimenu>Pool</guimenu> out of 
        which to take the IP address.
       </para>
       <para>On the right-hand side, a chart shows the project quota for IP
        addresses and lets you view the number of resources that are used 
        by already running instances.</para>
      </step>
      <step>
       <para>Click <guimenu>Allocate IP</guimenu>.</para>
       <para>A message on the Web page shows if the action has been successful.
        The &dash; shows the allocated IP addresses in the <guimenu>Access &amp;
         Security</guimenu> category.</para>
      </step>
     </substeps>
    </step>
    <step>
     <para>
      To release one or multiple floating IP addresses from a project:
     </para>
     <substeps>
      <step>
       <para>
        Activate the check boxes in front of the IP addresses that you want to
        release.
       </para>
      </step>
      <step>
       <para>Click <guimenu>Release Floating IPs</guimenu>. The IP addresses are
        put back into the pool of IP addresses that is available for all projects. 
        If an IP address to release is currently assigned to a running instance, 
        it will automatically be dissociated from the instance.</para>
      </step>
     </substeps>
    </step>
   </procedure>
   <procedure>
    <title>Assigning Floating (Public) IP Addresses to Instances</title>
    <para>After floating IP addresses have been allocated to
     the current project, you can assign them to running instances. One floating 
     IP address can be assigned to an instance at a time.</para>
    <step>
     <para>Log in to &cloud; &dash; with your user name and password.</para>
    </step>
    <step>
     <para>If you are a member of multiple projects, select a project from the 
      drop-down list at the top of the <guimenu>Projects</guimenu>
      tab.</para>
    </step>
    <step>
     <para>Click the <guimenu>Access &amp; Security</guimenu> category. The 
      &dash; shows a list of <guimenu>Floating IPs</guimenu>, 
      <guimenu>Security Groups</guimenu>, and <guimenu>Keypairs</guimenu> 
      for the current project. 
     </para>
    </step>
    <step>
     <para>Select an IP address and click <guimenu>Associate IP</guimenu>.</para>
    </step>
    <step>
     <para>In the window that opens, select the <guimenu>Instance</guimenu>
      to associate the IP with and confirm your choice.</para>
     <para>In the <guimenu>Access &amp; Security</guimenu> category, the list of 
      <guimenu>Floating IPs</guimenu> shows the ID of the instance with which
      the IP has been associated. The instance is now publically available under
      the respective floating IPs address (provided you have also configured 
      the security groups rules for the instance accordingly). For details,
      refer to <xref linkend="sec.user.dash.inst.access.security"/>.
     </para>
    </step>
   </procedure>
   <para>Each instance can have two IP addresses: a private and a public one. 
    Private IP addresses are used for communication between instances, public
    ones for communication with the outside world. When an instance is launched,
    it is automatically assigned a private IP address. From the pool of floating
    IPs available in &ostack; Nova, you can assign (or allocate) a public IP 
    address to instances. Floating IP addresses can be dynamically added to 
    running instances in a cloud.<remark>taroth 2012-08-21: DEVs, whose task
     is it to create floating IPs in the first place? admin? operator? and is
     there more than the Nova pool to allocate IPs from?</remark>
   </para>
   <procedure>
    <title>Allocating or Releasing Floating (Public) IPs</title>
    <para>Before you can assign a floating IP address to an instance, you first 
     need to allocate floating IPs to a project.</para>
    <step>
     <para>Log in to &cloud; &dash; with your user name and password.</para>
    </step>
    <step>
     <para>If you are a member of multiple projects, select a project from the 
      drop-down list at the top of the <guimenu>Projects</guimenu>
      tab.</para>
    </step>
    <step>
     <para>Click the <guimenu>Access &amp; Security</guimenu> category. The &dash;
      shows a list of <guimenu>Floating IPs</guimenu>, <guimenu>Security Groups</guimenu>,
      and <guimenu>Keypairs</guimenu> for the current project. 
     </para>
    </step>
    <step>
     <para>To allocate a floating IP address to the current project:</para>
     <substeps>
      <step>
       <para>Click <guimenu>Allocate IP to Project</guimenu>.</para>
      </step>
      <step>
       <para>In the window that opens, select a <guimenu>Pool</guimenu> out of 
        which to take the IP address.
       </para>
       <para>On the right-hand side, a chart shows the project quota for IP
        addresses and lets you view the number of resources that are used 
        by already running instances.</para>
      </step>
      <step>
       <para>Click <guimenu>Allocate IP</guimenu>.</para>
       <para>A message on the Web page shows if the action has been successful.
        The &dash; shows the allocated IP addresses in the <guimenu>Access &amp;
         Security</guimenu> category.</para>
      </step>
     </substeps>
    </step>
    <step>
     <para>
      To release one or multiple floating IP addresses from a project:
     </para>
     <substeps>
      <step>
       <para>
        Activate the check boxes in front of the IP addresses that you want to
        release.
       </para>
      </step>
      <step>
       <para>Click <guimenu>Release Floating IPs</guimenu>. The IP addresses are
        put back into the pool of IP addresses that is available for all projects. 
        If an IP address to release is currently assigned to a running instance, 
        it will automatically be dissociated from the instance.</para>
      </step>
     </substeps>
    </step>
   </procedure>
   <procedure>
    <title>Assigning Floating (Public) IP Addresses to Instances</title>
    <para>After floating IP addresses have been allocated to
     the current project, you can assign them to running instances. One floating 
     IP address can be assigned to an instance at a time.</para>
    <step>
     <para>Log in to &cloud; &dash; with your user name and password.</para>
    </step>
    <step>
     <para>If you are a member of multiple projects, select a project from the 
      drop-down list at the top of the <guimenu>Projects</guimenu>
      tab.</para>
    </step>
    <step>
     <para>Click the <guimenu>Access &amp; Security</guimenu> category. The 
      &dash; shows a list of <guimenu>Floating IPs</guimenu>, 
      <guimenu>Security Groups</guimenu>, and <guimenu>Keypairs</guimenu> 
      for the current project. 
     </para>
    </step>
    <step>
     <para>Select an IP address and click <guimenu>Associate IP</guimenu>.</para>
    </step>
    <step>
     <para>In the window that opens, select the <guimenu>Instance</guimenu>
      to associate the IP with and confirm your choice.</para>
     <para>In the <guimenu>Access &amp; Security</guimenu> category, the list of 
      <guimenu>Floating IPs</guimenu> shows the ID of the instance with which
      the IP has been associated. The instance is now publically available under
      the respective floating IPs address (provided you have also configured 
      the security groups rules for the instance accordingly). For details,
      refer to <xref linkend="sec.user.dash.inst.access.security"/>.
     </para>
    </step>
   </procedure>
   
   
  </sect2>

 </sect1>

 <sect1 id="sec.user.dash.inst.manage">
  <title>Managing Instances</title>
  <para></para>
  <para>
   To view more details, click the instance's name. It is a link that leads to 
   three tabs:</para>
  <variablelist>
   <varlistentry>
    <term>
     <guimenu>Overview</guimenu>
    </term>
    <listitem>
     <para>Lists additional information about the instance. For example,
      it shows the type of IP addresses that are assigned to an instance.<!-- (private
       ones are listed as <literal>Nova_Fixed</literal>, public ones are listed
       as <literal>Nova_Fixed</literal>).-->
      <remark>taroth 2012-08-16: DEVs, why are 
       floating/public ones also shown as Nova_Fixed? is that meant to be? or a
       bug? - cthiel 2012-08-21: smells like a bug - taroth 2012-08-22: filed 
       bnc#776929</remark>
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>
     <guimenu>Log</guimenu>
    </term>
    <listitem>
     <para>Shows the output of an instance's serial console. To make use of this 
      feature, the respective image must have set the serial console correctly 
      in &grub;.</para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>
     <guimenu>VNC</guimenu>
    </term>
    <listitem>
     <para>Allows you to access the instance via VNC console. 
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <sect2 id="sec.user.dash.inst.manage.remote">
   <title>Accessing Instances from Remote</title>
   <para></para>
   <procedure>
    <title>Logging In to an Instance via SSH</title>
    <para>
     <remark>taroth 2012-08-21: DEVs, is the following correct?</remark>
     To log in to an instance via SSH, you need to have allowed SSH access in the
     respective security group that the instance is assigned to. For details,
     refer to <xref linkend="sec.user.dash.inst.access.security"/>. To log in
     from outside the cloud, the instance needs to have a floating IP address.</para>
    <step>
     <para>Allow SSH access by configuring security group rules. For details,
      refer to <xref linkend="sec.user.dash.inst.access.security"/>.</para>
    </step>
    <step>
     <para>To allow SSH access from outside the cloud, assign a floating IP 
      address to the instance. For details, refer to 
      <xref linkend="sec.user.dash.inst.access.security"/>.</para>
    </step>
    <step>
     <para>Look up the private or public IP address of the instance. For 
      example, log in to &cloud; &dash;. On the <guimenu>Project</guimenu> tab, 
      switch to the <guimenu>Instances &amp; Volumes</guimenu> category. If only
      one IP address is shown for the instance, it is the private IP address (for
      communication inside the cloud). If a second IP address is shown, the second
      one is the public (floating) IP address.</para>
    </step>
    <step>
     <para>Log in to the instance (using either the public or private IP adress):</para>
     <screen>ssh root@<replaceable>IP_ADDRESS</replaceable>
     </screen>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.user.dash.inst.manage.snapshots">
   <title>Using Instance Snapshots</title>
   <para></para>
   
   <procedure>
    <title>Creating and Using Instance Snapshots</title>
    <para>Snapshots preserve the disk state of a running instance. 
     <remark>taroth 2012-08-21: DEVs, if I got it right, ephemeral disks are 
      generally excluded from the snapshots?</remark> You can launch a new
     instance from a snapshot or use a snapshot to create a new image based upon 
     the snapshot. 
    </para>
    <step>
     <para>Log in to &cloud; &dash; with your user name and password.</para>
    </step>
    <step>
     <para>If you are a member of multiple projects, select a project from the 
      drop-down list at the top of the <guimenu>Projects</guimenu>
      tab.</para>
    </step>
    <step>
     <para>Click the <guimenu>Instances &amp; Volumes</guimenu> category.</para>
    </step>
    <step>
     <para>To create an instance snapshot:</para>
     <substeps>
      <step>
       <para>Select the instance for which to create a snapshot. From the
        <guimenu>Actions</guimenu> drop-down list, select
        <guimenu>Snapshot</guimenu>.</para>
      </step>
      <step>
       <para>In the window that opens, enter a name for the snapshot and confirm your 
        changes. The &dash; shows the new <guimenu>Instance Snapshot</guimenu>.</para>
      </step>
     </substeps>
    </step>
    <step>
     <para>To launch a new instance from the snapshot, select the snapshot and
      click <guimenu>Launch</guimenu>. Proceed with launching an instance as 
      described in <xref linkend="pro.user.instances.launch"/>.</para>
    </step>
    <step>
     <para>To base a new image on a snapshot:</para>
     <substeps>
      <step>
       <para>Select the snapshot and from the <guimenu>Actions</guimenu> drop-down 
        list, select <guimenu>Edit</guimenu>.
       </para>
      </step>
      <step>
       <para>In the window that opens, enter the image properties.
        For more information, refer to <xref linkend="sec.adm.dash.img"/>.</para>
      </step>
      <step>
       <para>Click <guimenu>Update Image</guimenu>. </para>
       <para>&dash; shows the newly created image in the
        list of images in the 
        <guimenu>Images &amp; Snapshot</guimenu> category. If you delete the 
        snapshot, upon which the image is based, the image will be deleted as well.
        If you delete the image, the snapshot upon which it is based, will be deleted
        as well.</para>
      </step>
     </substeps>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.user.dash.inst.manage.terminate">
   <title>Pausing, Suspending, Rebooting, or Terminating Instances</title>
   <para></para>
   <procedure>
    <title>Pausing, Suspending, rebooting or Terminating Images</title>
    <para>You can only pause or suspend instances if they are running on &kvm; or
     &xen;. If you pause an instance, the content of the virtual machine is stored
     to memory (RAM) and the image is kept running in a <quote>frozen</quote>
     state. When suspending an instance, the contents of the virtual 
     machine is stored to disk and memory and vCPUS are freed.
    </para>
    <important>
     <title>Risk of Data Loss</title>
     
     <para>
      <remark>taroth 2012-08-21: DEVs, is the following correct?</remark>
      Terminating or rebooting an instance has the following consequences:</para>
     <itemizedlist>
      <listitem>
       <para>All data on the image's root disk and ephemeral disks are destroyed.
        To prevent that, use volumes and attach them to an instance for 
        persistent storage.</para>
      </listitem>
      <listitem>
       <para>If a floating IP address was assigned to that instance,
        the IP adress is disassociated from that image. However, it is still available
        in the pool of allocated IP addresses for the current project.</para>
      </listitem>
     </itemizedlist>
    </important>
    <step>
     <para>Log in to &cloud; &dash; with your user name and password.</para>
    </step>
    <step>
     <para>If you are a member of multiple projects, select a project from the 
      drop-down list at the top of the <guimenu>Projects</guimenu>
      tab.</para>
    </step>
    <step>
     <para>Click the <guimenu>Instances &amp; Volumes</guimenu> category.</para>
    </step>
    <step>
     <para>Select the instance which to put out of the running state. From the
      <guimenu>Actions</guimenu> drop-down list, select
      <guimenu>Pause Instance</guimenu>, <guimenu>Suspend Instance</guimenu>, 
      <guimenu>Reboot Instance</guimenu>, or <guimenu>Terminate Instance</guimenu>. </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.user.dash.inst.manage.volumes">
   <title>Using Volumes for Persistent Storage</title>
   <para></para>
  </sect2>
  <sect2 id="sec.user.dash.inst.manage.usage">
   <title>Tracking Usage</title>
   <para></para>
  </sect2>

 </sect1>


 
 
 
 
 <sect1 id="sec.user.dash.vol">
  <title>Managing Volumes</title>
  <para></para>
 </sect1>
</chapter>
