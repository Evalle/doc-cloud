<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet
 href="urn:x-daps:xslt:profiling:novdoc-profile.xsl" 
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "IGNORE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<chapter id="cha.depl.nodes">
 <title>Deploying the &ostack; Nodes</title>
 <para/>
 <screen>
 - before you start:
   Write down the MAC address of each host and note which host should serve
   which function (controller, storage ceph, storage swift, compute)
   -> make ist easier to identify nodes during installation

==> Special needs: adjust autoyast.xml.erb

   
  Booting:
  - PXE-boot the &ostack; nodes (must be in the 10.11.20/24 network)
    (either all in one go or one after another: Recommended: booting all)
    * will boot into the SLES "sledgehammer" image and deploy crowbar and chef ??
      onto the node
      - during that deployment node will be listed in the crowbar webUI
        Nodes as being in state "Discovering" (gray bullet) 
        -> a lot of chef log messages to be seen on the node
        --> hostnames = MAC address
        --> Group-name = part of MAC 
      - once node is ready for allocation it will be listed as being in state
        "Discovered" (yellow bullet)
         -> on the host: message block with network parameters ending with
            NODE_STATE=false will appear again and again
   Allocating:
   - once all nodes are in state "discovered" (yellow bullet) allocate them with
     Nodes -> Bulk Edit; to allocate a single node click on it's name
   - Specify a self-explaing alias (control, compute1, compute2,
     stor_obj1, stor_block1,.... Will be used to list clients in node
     dashboard and as CNAME in DNS --> STRONGLY recommended
     alos recommended: Description, will be shown as hover in Dashboard
     (default: MAC, same as $HOSTNAME), tick Allocate and Save
     
      --> to allocate a single node, click it's name -> Edit-> fill in -> Save)
   - return to Dashboard by clicking Nodes
   - automatic installation of all notes is triggered -> no user interaction
     is required
   - Dashboard status: Installing (half yellow, half green bullet)
   - installation Finished: Dashboard status "Ready" (green bullet), login
     prompt at client


Editing Nodes:
  - Deleting:
     -> node name -> Edit -> Forget
       (will "delete" node from dashboard, if it is rebooted a new
       installation will be triggered)
     -> deallocate ??
     -> reinstall ??


Group Management:
  - Create group: (e.g. control, compute, storage)
    Nodes->Dashborad->Enter new group name -> Add Group
    Drag and Drop Nodes onto new group title
    Drag and Drop more nodes on the title

    Admin group is reserved for the admin node


Maybe add a small section on barclamps:
- how to access
  Menu Barclamps
- what is a proposal
  == configuration you can create and then deploy
  -> give it a title and a description (optional, but recommened, defaults:
  proposal, Created On _DATE_)
  -> Click "create" and edit (page name: Edit Proposal)
     - either via WebUi
     - or by editing barclamp file with "Raw"
- how to deploy
  Section Node Deployment on Edit Proposal Page
  -> Drag and drop Node from Available Nodes Column (left) to Role Title in
     the right column
     use input field to filter Available Nodes column on the fly

  -> Delete a node from the Role column by clicking the "Remove Node" icon in
     the corresponding line
     
- how to edit existing
  Barclamps -> OpenStack -> _Name_ -> title
  Shows Proposal summary
  -> Edit Proposal to adjust
  

To deploy the nodes go to Barclamps -> OpenStack
     
   
 </screen>
 <sect1 id="sec.depl.nodes.controller">
  <title>&contrnode;</title>

  <para>
   <remark condition="clarity">
    2012-06-29 - fs:
    including some level of configuration recommendation 
   </remark>
  </para>
  <screen>
   1. Deploy Database:
      Click "Database" to open proposal creating option
      -> Give it a new title
  </screen>


  
 </sect1>
 <sect1 id="sec.depl.nodes.compute">
  <title>&compnode;</title>

  <para></para>
 </sect1>
 <sect1 id="sec.depl.nodes.storage">
  <title>&stornode;</title>

  <para>
   <remark condition="clarity">
    2012-06-29 - fs: aka "Swift"
   </remark>
  </para>
 </sect1>
</chapter>
